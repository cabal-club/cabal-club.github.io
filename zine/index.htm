<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>---</title>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta charset="utf-8"></head>
<body style="margin: 0px; padding: 0px; overflow: hidden;">
<script>!function(){var e,t={exports:{}};e=function(){function e(e,t){this.id=H++,this.type=e,this.data=t}function t(e){return"["+function e(t){if(0===t.length)return[];var n=t.charAt(0),r=t.charAt(t.length-1);if(1<t.length&&n===r&&('"'===n||"'"===n))return['"'+t.substr(1,t.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t))return e(t.substr(0,n.index)).concat(e(n[1])).concat(e(t.substr(n.index+n[0].length)));if(1===(n=t.split(".")).length)return['"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(t=[],r=0;r<n.length;++r)t=t.concat(e(n[r]));return t}(e).join("][")+"]"}function n(e){return"string"==typeof e?e.split():e}function r(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function a(e){var t,n;return t=(65535<e)<<4,t|=n=(255<(e>>>=t))<<3,(t|=n=(15<(e>>>=n))<<2)|(n=(3<(e>>>=n))<<1)|e>>>n>>1}function o(){function e(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return 0<(t=n[a(e)>>2]).length?t.pop():new ArrayBuffer(e)}function t(e){n[a(e.byteLength)>>2].push(e)}var n=i(8,function(){return[]});return{alloc:e,free:t,allocType:function(t,n){var r=null;switch(t){case 5120:r=new Int8Array(e(n),0,n);break;case 5121:r=new Uint8Array(e(n),0,n);break;case 5122:r=new Int16Array(e(2*n),0,n);break;case 5123:r=new Uint16Array(e(2*n),0,n);break;case 5124:r=new Int32Array(e(4*n),0,n);break;case 5125:r=new Uint32Array(e(4*n),0,n);break;case 5126:r=new Float32Array(e(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r},freeType:function(e){t(e.buffer)}}}function s(e){return!!e&&"object"==typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"==typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||Q(e.data))}function f(e,t,n,r,i,a){for(var o=0;o<t;++o)for(var s=e[o],f=0;f<n;++f)for(var u=s[f],c=0;c<r;++c)i[a++]=u[c]}function u(e){return 0|X[Object.prototype.toString.call(e)]}function c(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function l(e,t,n,r,i,a,o){for(var s=0,f=0;f<n;++f)for(var u=0;u<r;++u)e[s++]=t[i*f+a*u+o]}function p(e,t,n,r){function i(t){this.id=p++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function a(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function o(e,t,n,r,i,o){if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){i=$(t);for(var f=r=1;f<i.length;++f)r*=i[f];e.dimension=r,a(e,t=Z(t,i,e.dtype),n),o?e.persistentData=t:U.freeType(t)}else"number"==typeof t[0]?(e.dimension=i,c(i=U.allocType(e.dtype,t.length),t),a(e,i,n),o?e.persistentData=i:U.freeType(i)):Q(t[0])&&(e.dimension=t[0].length,e.dtype=r||u(t[0])||5126,a(e,t=Z(t,[t.length,t[0].length],e.dtype),n),o?e.persistentData=t:U.freeType(t))}else if(Q(t))e.dtype=r||u(t),e.dimension=i,a(e,t,n),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(s(t)){i=t.shape;var p=t.stride,d=(f=t.offset,0),h=0,m=0,g=0;1===i.length?(d=i[0],h=1,m=p[0],g=0):2===i.length&&(d=i[0],h=i[1],m=p[0],g=p[1]),e.dtype=r||u(t.data)||5126,e.dimension=h,l(i=U.allocType(e.dtype,d*h),t.data,d,h,m,g,f),a(e,i,n),o?e.persistentData=i:U.freeType(i)}}function f(n){t.bufferCount--;for(var i=0;i<r.state.length;++i){var a=r.state[i];a.buffer===n&&(e.disableVertexAttribArray(i),a.buffer=null)}e.deleteBuffer(n.buffer),n.buffer=null,delete d[n.id]}var p=0,d={};i.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){f(this)};var h=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(d).forEach(function(t){e+=d[t].stats.size}),e}),{create:function(r,a,p,h){function m(t){var r=35044,i=null,a=0,f=0,u=1;return Array.isArray(t)||Q(t)||s(t)?i=t:"number"==typeof t?a=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=J[t.usage]),"type"in t&&(f=K[t.type]),"dimension"in t&&(u=0|t.dimension),"length"in t&&(a=0|t.length)),g.bind(),i?o(g,i,r,f,u,h):(a&&e.bufferData(g.type,a,r),g.dtype=f||5121,g.usage=r,g.dimension=u,g.byteLength=a),n.profile&&(g.stats.size=g.byteLength*ee[g.dtype]),m}t.bufferCount++;var g=new i(a);return d[g.id]=g,p||m(r),m._reglType="buffer",m._buffer=g,m.subdata=function(t,n){var r,i=0|(n||0);if(g.bind(),Q(t))e.bufferSubData(g.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"==typeof t[0]){var a=U.allocType(g.dtype,t.length);c(a,t),e.bufferSubData(g.type,i,a),U.freeType(a)}else(Array.isArray(t[0])||Q(t[0]))&&(r=$(t),a=Z(t,r,g.dtype),e.bufferSubData(g.type,i,a),U.freeType(a))}else if(s(t)){r=t.shape;var o=t.stride,f=a=0,p=0,d=0;1===r.length?(a=r[0],f=1,p=o[0],d=0):2===r.length&&(a=r[0],f=r[1],p=o[0],d=o[1]),r=Array.isArray(t.data)?g.dtype:u(t.data),l(r=U.allocType(r,a*f),t.data,a,f,p,d,t.offset),e.bufferSubData(g.type,i,r),U.freeType(r)}return m},n.profile&&(m.stats=g.stats),m.destroy=function(){f(g)},m},createStream:function(e,t){var n=h.pop();return n||(n=new i(e)),n.bind(),o(n,t,35040,0,1,!1),n},destroyStream:function(e){h.push(e)},clear:function(){G(d).forEach(f),h.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof i?e._buffer:null},restore:function(){G(d).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:o}}function d(e,t,n,r){function i(e){this.id=u++,f[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function a(r,i,a,o,f,u,c){if(r.buffer.bind(),i){var l=c;c||Q(i)&&(!s(i)||Q(i.data))||(l=t.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,a,l,3)}else e.bufferData(34963,u,a),r.buffer.dtype=l||5121,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=u;if(l=c,!c){switch(r.buffer.dtype){case 5121:case 5120:l=5121;break;case 5123:case 5122:l=5123;break;case 5125:case 5124:l=5125}r.buffer.dtype=l}r.type=l,0>(i=f)&&(i=r.buffer.byteLength,5123===l?i>>=1:5125===l&&(i>>=2)),r.vertCount=i,i=o,0>o&&(i=4,1===(o=r.buffer.dimension)&&(i=0),2===o&&(i=1),3===o&&(i=4)),r.primType=i}function o(e){r.elementsCount--,delete f[e.id],e.buffer.destroy(),e.buffer=null}var f={},u=0,c={uint8:5121,uint16:5123};t.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var l=[];return{create:function(e,t){function f(e){if(e)if("number"==typeof e)u(e),l.primType=4,l.vertCount=0|e,l.type=5121;else{var t=null,n=35044,r=-1,i=-1,o=0,p=0;Array.isArray(e)||Q(e)||s(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=J[e.usage]),"primitive"in e&&(r=te[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(p=c[e.type]),"length"in e?o=0|e.length:(o=i,5123===p||5122===p?o*=2:5125!==p&&5124!==p||(o*=4))),a(l,t,n,r,i,o,p)}else u(),l.primType=4,l.vertCount=0,l.type=5121;return f}var u=n.create(null,34963,!0),l=new i(u._buffer);return r.elementsCount++,f(e),f._reglType="elements",f._elements=l,f.subdata=function(e,t){return u.subdata(e,t),f},f.destroy=function(){o(l)},f},createStream:function(e){var t=l.pop();return t||(t=new i(n.create(null,34963,!0,!1)._buffer)),a(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){l.push(e)},getElements:function(e){return"function"==typeof e&&e._elements instanceof i?e._elements:null},clear:function(){G(f).forEach(o)}}}function h(e){for(var t=U.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(1/0===e[n])t[n]=31744;else if(-1/0===e[n])t[n]=64512;else{ne[0]=e[n];var r=(a=re[0])>>>31<<15,i=(a<<1>>>24)-127,a=a>>13&1023;t[n]=-24>i?r:-14>i?r+(a+1024>>-14-i):15<i?r+31744:r+(i+15<<10)+a}return t}function m(e){return Array.isArray(e)||Q(e)}function g(e){return"[object "+e+"]"}function y(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function v(e){return!(!Array.isArray(e)||0===e.length||!m(e[0]))}function b(e){return Object.prototype.toString.call(e)}function w(e){if(!e)return!1;var t=b(e);return 0<=pe.indexOf(t)||y(e)||v(e)||s(e)}function x(e,t){36193===e.type?(e.data=h(t),U.freeType(t)):e.data=t}function k(e,t,n,r,i,a){if(e=void 0!==he[e]?he[e]:oe[e]*de[t],a&&(e*=6),i){for(r=0;1<=n;)r+=e*n*n,n/=2;return r}return e*n*r}function E(e,t,n,r,i,a,o){function f(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function c(e,t){if("object"==typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=q[t.colorSpace]),"type"in t&&(e.type=N[t.type]);var n=e.width,r=e.height,i=e.channels,a=!1;"shape"in t?(n=t.shape[0],r=t.shape[1],3===t.shape.length&&(i=t.shape[2],a=!0)):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height),"channels"in t&&(i=t.channels,a=!0)),e.width=0|n,e.height=0|r,e.channels=0|i,n=!1,"format"in t&&(n=t.format,r=e.internalformat=K[n],e.format=de[r],n in N&&!("type"in t)&&(e.type=N[n]),n in J&&(e.compressed=!0),n=!0),!a&&n?e.channels=oe[e.format]:a&&!n&&e.channels!==ae[e.format]&&(e.format=e.internalformat=ae[e.channels])}}function l(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function p(){f.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(e,t){var n=null;if(w(t)?n=t:t&&(c(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),w(t.data)&&(n=t.data)),t.copy){var r=i.viewportWidth,a=i.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0}else if(n){if(Q(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=0|X[Object.prototype.toString.call(n)]);else if(y(n)){switch(e.channels=e.channels||4,a=(r=n).length,e.type){case 5121:case 5123:case 5125:case 5126:(a=U.allocType(e.type,a)).set(r),e.data=a;break;case 36193:e.data=h(r)}e.alignment=1,e.needsFree=!0}else if(s(n)){r=n.data,Array.isArray(r)||5121!==e.type||(e.type=0|X[Object.prototype.toString.call(r)]),a=n.shape;var o,f,u,l,p=n.stride;3===a.length?(u=a[2],l=p[2]):l=u=1,o=a[0],f=a[1],a=p[0],p=p[1],e.alignment=1,e.width=o,e.height=f,e.channels=u,e.format=e.internalformat=ae[u],e.needsFree=!0,o=l,n=n.offset,u=e.width,l=e.height,f=e.channels;for(var d=U.allocType(36193===e.type?5126:e.type,u*l*f),g=0,k=0;k<l;++k)for(var E=0;E<u;++E)for(var A=0;A<f;++A)d[g++]=r[a*E+p*k+o*A+n];x(e,d)}else if(b(n)===se||b(n)===fe)b(n)===se?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if(b(n)===ue)e.element=n,e.width=n.width,e.height=n.height,e.channels=4;else if(b(n)===ce)e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if(b(n)===le)e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(v(n)){for(r=e.width||n[0].length,a=e.height||n.length,p=e.channels,p=m(n[0][0])?p||n[0][0].length:p||1,o=V.shape(n),u=1,l=0;l<o.length;++l)u*=o[l];u=U.allocType(36193===e.type?5126:e.type,u),V.flatten(n,o,"",u),x(e,u),e.alignment=1,e.width=r,e.height=a,e.channels=p,e.format=e.internalformat=ae[p],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function g(t,n,i,a,o){var s=t.element,f=t.data,u=t.internalformat,c=t.format,p=t.type,d=t.width,h=t.height;l(t),s?e.texSubImage2D(n,o,i,a,c,p,s):t.compressed?e.compressedTexSubImage2D(n,o,i,a,u,d,h,f):t.needsCopy?(r(),e.copyTexSubImage2D(n,o,i,a,t.xOffset,t.yOffset,d,h)):e.texSubImage2D(n,o,i,a,d,h,c,p,f)}function E(){return he.pop()||new p}function A(e){e.needsFree&&U.freeType(e.data),p.call(e),he.push(e)}function D(){f.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function T(e,t,n){var r=e.images[0]=E();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function _(e,t){var n=null;if(w(t))u(n=e.images[0]=E(),e),d(n,t),e.mipmask=1;else if(c(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)u(n=e.images[i]=E(),e),n.width>>=i,n.height>>=i,d(n,r[i]),e.mipmask|=1<<i;else u(n=e.images[0]=E(),e),d(n,t),e.mipmask=1;u(e,e.images[0])}function S(t,n){for(var i=t.images,a=0;a<i.length&&i[a];++a){var o=i[a],s=n,f=a,u=o.element,c=o.data,p=o.internalformat,d=o.format,h=o.type,m=o.width,g=o.height,y=o.channels;l(o),u?e.texImage2D(s,f,d,d,h,u):o.compressed?e.compressedTexImage2D(s,f,p,m,g,0,c):o.needsCopy?(r(),e.copyTexImage2D(s,f,d,o.xOffset,o.yOffset,m,g,0)):((o=!c)&&(c=U.zero.allocType(h,m*g*y)),e.texImage2D(s,f,d,m,g,0,d,h,c),o&&c&&U.zero.freeType(c))}}function j(){var e=me.pop()||new D;f.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function O(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&A(t[n]),t[n]=null;me.push(e)}function L(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function F(e,t){"min"in t&&(e.minFilter=Y[t.min],0<=ie.indexOf(e.minFilter)&&!("faces"in t)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=R[t.mag]);var n=e.wrapS,r=e.wrapT;if("wrap"in t){var i=t.wrap;"string"==typeof i?n=r=H[i]:Array.isArray(i)&&(n=H[i[0]],r=H[i[1]])}else"wrapS"in t&&(n=H[t.wrapS]),"wrapT"in t&&(r=H[t.wrapT]);if(e.wrapS=n,e.wrapT=r,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=I[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function C(n,r){e.texParameteri(r,10241,n.minFilter),e.texParameteri(r,10240,n.magFilter),e.texParameteri(r,10242,n.wrapS),e.texParameteri(r,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(r))}function z(t){f.call(this),this.mipmask=0,this.internalformat=6408,this.id=ge++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new L,o.profile&&(this.stats={size:0})}function M(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function B(){var t=be[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function P(t){var n=t.texture,r=t.unit,i=t.target;0<=r&&(e.activeTexture(33984+r),e.bindTexture(i,null),be[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ye[t.id],a.textureCount--}var I={"don't care":4352,"dont care":4352,nice:4354,fast:4353},H={repeat:10497,clamp:33071,mirror:33648},R={nearest:9728,linear:9729},Y=W({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},R),q={none:0,browser:37444},N={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},K={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},J={};t.ext_srgb&&(K.srgb=35904,K.srgba=35906),t.oes_texture_float&&(N.float32=N.float=5126),t.oes_texture_half_float&&(N.float16=N["half float"]=36193),t.webgl_depth_texture&&(W(K,{depth:6402,"depth stencil":34041}),W(N,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&W(J,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&W(J,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&W(J,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(J["rgb etc1"]=36196);var Z=Array.prototype.slice.call(e.getParameter(34467));Object.keys(J).forEach(function(e){var t=J[e];0<=Z.indexOf(t)&&(K[e]=t)});var $=Object.keys(K);n.textureFormats=$;var ee=[];Object.keys(K).forEach(function(e){ee[K[e]]=e});var te=[];Object.keys(N).forEach(function(e){te[N[e]]=e});var ne=[];Object.keys(R).forEach(function(e){ne[R[e]]=e});var re=[];Object.keys(Y).forEach(function(e){re[Y[e]]=e});var pe=[];Object.keys(H).forEach(function(e){pe[H[e]]=e});var de=$.reduce(function(e,t){var n=K[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?e[n]=n:32855===n||0<=t.indexOf("rgba")?e[n]=6408:e[n]=6407,e},{}),he=[],me=[],ge=0,ye={},ve=n.maxTextureUnits,be=Array(ve).map(function(){return null});return W(z.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var n=0;n<ve;++n){var r=be[n];if(r){if(0<r.bindCount)continue;r.unit=-1}be[n]=this,t=n;break}o.profile&&a.maxTextureUnits<t+1&&(a.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&P(this)}}),o.profile&&(a.getTotalTextureSize=function(){var e=0;return Object.keys(ye).forEach(function(t){e+=ye[t].stats.size}),e}),{create2D:function(t,n){function r(e,t){var n=i.texInfo;L.call(n);var a=j();return"number"==typeof e?T(a,0|e,"number"==typeof t?0|t:0|e):e?(F(n,e),_(a,e)):T(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),i.mipmask=a.mipmask,u(i,a),i.internalformat=a.internalformat,r.width=a.width,r.height=a.height,M(i),S(a,3553),C(n,3553),B(),O(a),o.profile&&(i.stats.size=k(i.internalformat,i.type,a.width,a.height,n.genMipmaps,!1)),r.format=ee[i.internalformat],r.type=te[i.type],r.mag=ne[n.magFilter],r.min=re[n.minFilter],r.wrapS=pe[n.wrapS],r.wrapT=pe[n.wrapT],r}var i=new z(3553);return ye[i.id]=i,a.textureCount++,r(t,n),r.subimage=function(e,t,n,a){t|=0,n|=0,a|=0;var o=E();return u(o,i),o.width=0,o.height=0,d(o,e),o.width=o.width||(i.width>>a)-t,o.height=o.height||(i.height>>a)-n,M(i),g(o,3553,t,n,a),B(),A(o),r},r.resize=function(t,n){var a=0|t,s=0|n||a;if(a===i.width&&s===i.height)return r;r.width=i.width=a,r.height=i.height=s,M(i);for(var f,u=i.channels,c=i.type,l=0;i.mipmask>>l;++l){var p=a>>l,d=s>>l;if(!p||!d)break;f=U.zero.allocType(c,p*d*u),e.texImage2D(3553,l,i.format,p,d,0,i.format,i.type,f),f&&U.zero.freeType(f)}return B(),o.profile&&(i.stats.size=k(i.internalformat,i.type,a,s,!1,!1)),r},r._reglType="texture2d",r._texture=i,o.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(t,n,r,i,s,f){function l(e,t,n,r,i,a){var s,f=p.texInfo;for(L.call(f),s=0;6>s;++s)h[s]=j();if("number"!=typeof e&&e){if("object"==typeof e)if(t)_(h[0],e),_(h[1],t),_(h[2],n),_(h[3],r),_(h[4],i),_(h[5],a);else if(F(f,e),c(p,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)u(h[s],p),_(h[s],e[s]);else for(s=0;6>s;++s)_(h[s],e)}else for(e=0|e||1,s=0;6>s;++s)T(h[s],e,e);for(u(p,h[0]),p.mipmask=f.genMipmaps?(h[0].width<<1)-1:h[0].mipmask,p.internalformat=h[0].internalformat,l.width=h[0].width,l.height=h[0].height,M(p),s=0;6>s;++s)S(h[s],34069+s);for(C(f,34067),B(),o.profile&&(p.stats.size=k(p.internalformat,p.type,l.width,l.height,f.genMipmaps,!0)),l.format=ee[p.internalformat],l.type=te[p.type],l.mag=ne[f.magFilter],l.min=re[f.minFilter],l.wrapS=pe[f.wrapS],l.wrapT=pe[f.wrapT],s=0;6>s;++s)O(h[s]);return l}var p=new z(34067);ye[p.id]=p,a.cubeCount++;var h=Array(6);return l(t,n,r,i,s,f),l.subimage=function(e,t,n,r,i){n|=0,r|=0,i|=0;var a=E();return u(a,p),a.width=0,a.height=0,d(a,t),a.width=a.width||(p.width>>i)-n,a.height=a.height||(p.height>>i)-r,M(p),g(a,34069+e,n,r,i),B(),A(a),l},l.resize=function(t){if((t|=0)!==p.width){l.width=p.width=t,l.height=p.height=t,M(p);for(var n=0;6>n;++n)for(var r=0;p.mipmask>>r;++r)e.texImage2D(34069+n,r,p.format,t>>r,t>>r,0,p.format,p.type,null);return B(),o.profile&&(p.stats.size=k(p.internalformat,p.type,l.width,l.height,!1,!0)),l}},l._reglType="textureCube",l._texture=p,o.profile&&(l.stats=p.stats),l.destroy=function(){p.decRef()},l},clear:function(){for(var t=0;t<ve;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),be[t]=null;G(ye).forEach(P),a.cubeCount=0,a.textureCount=0},getTexture:function(e){return null},restore:function(){G(ye).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!=(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;6>r;++r)e.texImage2D(34069+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);C(t.texInfo,t.target)})}}}function A(e,t,n,r,i,a){function o(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=e=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function f(e,t,n){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function u(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,n=null,r=null,i=e;return"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),"texture2d"===(e=i._reglType)?n=i:"textureCube"===e?n=i:"renderbuffer"===e&&(r=i,t=36161),new o(t,n,r)}function l(e,t,n,a,s){return n?((e=r.create2D({width:e,height:t,format:a,type:s}))._texture.refCount=0,new o(3553,e,null)):((e=i.create({width:e,height:t,format:a}))._renderbuffer.refCount=0,new o(36161,null,e))}function p(e){return e&&(e.texture||e.renderbuffer)}function d(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}function h(){this.id=E++,A[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function g(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,a.framebufferCount--,delete A[t.id]}function y(t){var r;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(r=0;r<i.length;++r)u(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(36160,36064+r,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),u(36096,t.depthAttachment),u(36128,t.stencilAttachment),u(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.bindFramebuffer(36160,b.next?b.next.framebuffer:null),b.cur=b.next,e.getError()}function v(e,t){function n(e,t){var i,a=0,o=0,s=!0,u=!0;i=null;var d=!0,h="rgba",g="uint8",v=1,b=null,k=null,E=null,A=!1;"number"==typeof e?(a=0|e,o=0|t||a):e?("shape"in e?(a=(o=e.shape)[0],o=o[1]):("radius"in e&&(a=o=e.radius),"width"in e&&(a=e.width),"height"in e&&(o=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(v=0|e.colorCount),"colorTexture"in e&&(d=!!e.colorTexture,h="rgba4"),"colorType"in e&&(g=e.colorType,!d)&&("half float"===g||"float16"===g?h="rgba16f":"float"!==g&&"float32"!==g||(h="rgba32f")),"colorFormat"in e&&(h=e.colorFormat,0<=w.indexOf(h)?d=!0:0<=x.indexOf(h)&&(d=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(A=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"==typeof e.depth?s=e.depth:(b=e.depth,u=!1)),"stencil"in e&&("boolean"==typeof e.stencil?u=e.stencil:(k=e.stencil,s=!1)),"depthStencil"in e&&("boolean"==typeof e.depthStencil?s=u=e.depthStencil:(E=e.depthStencil,u=s=!1))):a=o=1;var D=null,T=null,_=null,S=null;if(Array.isArray(i))D=i.map(c);else if(i)D=[c(i)];else for(D=Array(v),i=0;i<v;++i)D[i]=l(a,o,d,h,g);for(a=a||D[0].width,o=o||D[0].height,b?T=c(b):s&&!u&&(T=l(a,o,A,"depth","uint32")),k?_=c(k):u&&!s&&(_=l(a,o,!1,"stencil","uint8")),E?S=c(E):!b&&!k&&u&&s&&(S=l(a,o,A,"depth stencil","depth stencil")),s=null,i=0;i<D.length;++i)f(D[i]),D[i]&&D[i].texture&&(u=ye[D[i].texture._texture.format]*ve[D[i].texture._texture.type],null===s&&(s=u));return f(T),f(_),f(S),m(r),r.width=a,r.height=o,r.colorAttachments=D,r.depthAttachment=T,r.stencilAttachment=_,r.depthStencilAttachment=S,n.color=D.map(p),n.depth=p(T),n.stencil=p(_),n.depthStencil=p(S),n.width=r.width,n.height=r.height,y(r),n}var r=new h;return a.framebufferCount++,n(e,t),W(n,{resize:function(e,t){var i=0|e,a=0|t||i;if(i===r.width&&a===r.height)return n;for(var o=r.colorAttachments,s=0;s<o.length;++s)d(o[s],i,a);return d(r.depthAttachment,i,a),d(r.stencilAttachment,i,a),d(r.depthStencilAttachment,i,a),r.width=n.width=i,r.height=n.height=a,y(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){g(r),m(r)},use:function(e){b.setFBO({framebuffer:n},e)}})}var b={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],x=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&x.push("srgba"),t.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&x.push("rgba32f");var k=["uint8"];t.oes_texture_half_float&&k.push("half float","float16"),t.oes_texture_float&&k.push("float","float32");var E=0,A={};return W(b,{getFramebuffer:function(e){return"function"==typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof h?e:null},create:v,createCube:function(e){function t(e){var i,a={color:null},o=0,s=null;i="rgba";var f="uint8",u=1;if("number"==typeof e?o=0|e:e?("shape"in e?o=e.shape[0]:("radius"in e&&(o=0|e.radius),"width"in e?o=0|e.width:"height"in e&&(o=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(u=0|e.colorCount),"colorType"in e&&(f=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(a.depth=e.depth),"stencil"in e&&(a.stencil=e.stencil),"depthStencil"in e&&(a.depthStencil=e.depthStencil)):o=1,s)if(Array.isArray(s))for(e=[],i=0;i<s.length;++i)e[i]=s[i];else e=[s];else for(e=Array(u),s={radius:o,format:i,type:f},i=0;i<u;++i)e[i]=r.createCube(s);for(a.color=Array(e.length),i=0;i<e.length;++i)u=e[i],o=o||u.width,a.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(u=0;u<e.length;++u)a.color[u].target=34069+i;0<i&&(a.depth=n[0].depth,a.stencil=n[0].stencil,a.depthStencil=n[0].depthStencil),n[i]?n[i](a):n[i]=v(a)}return W(t,{width:o,height:o,color:e})}var n=Array(6);return t(e),W(t,{faces:n,resize:function(e){var r=0|e;if(r===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(r);for(e=0;6>e;++e)n[e].resize(r);return t.width=t.height=r,t},_reglType:"framebufferCube",destroy:function(){n.forEach(function(e){e.destroy()})}})},clear:function(){G(A).forEach(g)},restore:function(){G(A).forEach(function(t){t.framebuffer=e.createFramebuffer(),y(t)})}})}function D(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function T(e,t,n,r){function i(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function a(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function o(n,r,i){if(!(o=(i=35632===n?u:c)[r])){var a=t.str(r),o=e.createShader(n);e.shaderSource(o,a),e.compileShader(o),i[r]=o}return o}function s(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function f(n,s){var f,u;f=o(35632,n.fragId),u=o(35633,n.vertId);var c=n.program=e.createProgram();e.attachShader(c,f),e.attachShader(c,u),e.linkProgram(c);var l=e.getProgramParameter(c,35718);r.profile&&(n.stats.uniformsCount=l);var p=n.uniforms;for(f=0;f<l;++f)if(u=e.getActiveUniform(c,f))if(1<u.size)for(var d=0;d<u.size;++d){var h=u.name.replace("[0]","["+d+"]");a(p,new i(h,t.id(h),e.getUniformLocation(c,h),u))}else a(p,new i(u.name,t.id(u.name),e.getUniformLocation(c,u.name),u));for(l=e.getProgramParameter(c,35721),r.profile&&(n.stats.attributesCount=l),p=n.attributes,f=0;f<l;++f)(u=e.getActiveAttrib(c,f))&&a(p,new i(u.name,t.id(u.name),e.getAttribLocation(c,u.name),u))}var u={},c={},l={},p=[],d=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return p.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return p.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);G(u).forEach(t),u={},G(c).forEach(t),c={},p.forEach(function(t){e.deleteProgram(t.program)}),p.length=0,l={},n.shaderCount=0},program:function(e,t,r){var i=l[t];i||(i=l[t]={});var a=i[e];return a||(a=new s(t,e),n.shaderCount++,f(a),i[e]=a,p.push(a)),a},restore:function(){u={},c={};for(var e=0;e<p.length;++e)f(p[e])},shader:o,frag:-1,vert:-1}}function _(e,t,n,r,i,a,o){function s(i){var a;a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,f=r.framebufferWidth,u=r.framebufferHeight,c=null;return Q(i)?c=i:i&&(o=0|i.x,s=0|i.y,f=0|(i.width||r.framebufferWidth-o),u=0|(i.height||r.framebufferHeight-s),c=i.data||null),n(),i=f*u*4,c||(5121===a?c=new Uint8Array(i):5126===a&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(o,s,f,u,6408,a,c),c}return function(e){return e&&"framebuffer"in e?function(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=s(e)}),n}(e):s(e)}}function S(e){return Array.prototype.slice.call(e)}function j(e){return S(e).join("")}function O(){function e(){var e=[],t=[];return W(function(){e.push.apply(e,S(arguments))},{def:function(){var r="v"+n++;return t.push(r),0<arguments.length&&(e.push(r,"="),e.push.apply(e,S(arguments)),e.push(";")),r},toString:function(){return j([0<t.length?"var "+t+";":"",j(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),i=n.toString,a=r.toString;return W(function(){n.apply(n,S(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+a()}})}var n=0,r=[],i=[],a=e(),o={};return{global:a,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return r[t];return t="g"+n++,r.push(t),i.push(e),t},block:e,proc:function(e,n){function r(){var e="a"+i.length;return i.push(e),e}var i=[];n=n||0;for(var a=0;a<n;++a)r();var s=(a=t()).toString;return o[e]=W(a,{arg:r,toString:function(){return j(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=j(arguments),n=t(),r=t(),i=n.toString,a=r.toString;return W(n,{then:function(){return n.apply(n,S(arguments)),this},else:function(){return r.apply(r,S(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),j(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(o).forEach(function(t){e.push('"',t,'":',o[t].toString(),",")}),e.push("}");var t=j(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,i)}}}function L(e){return Array.isArray(e)||Q(e)||s(e)}function F(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function C(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function z(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function M(e){return new C(!1,!1,!1,e)}function B(e,t){var n=e.type;return 0===n?new C(!0,1<=(n=e.data.length),2<=n,t):4===n?new C((n=e.data).thisDep,n.contextDep,n.propDep,t):new C(3===n,2===n,1===n,t)}function P(e,t,n,r,a,o,s,f,u,c,l,p,d,h,g){function y(e){return e.replace(".","_")}function v(e,t,n){var r=y(e);ne.push(e),ee[r]=$[r]=!!n,re[r]=t}function b(e,t,n){var r=y(e);ne.push(e),Array.isArray(n)?($[r]=n.slice(),ee[r]=n.slice()):$[r]=ee[r]=n,ie[r]=t}function w(){var e=O(),n=e.link,r=e.global;e.id=se++,e.batchId="0";var i=n(ae),a=e.shared={props:"a0"};Object.keys(ae).forEach(function(e){a[e]=r.def(i,".",e)});var o=e.next={},s=e.current={};Object.keys(ie).forEach(function(e){Array.isArray($[e])&&(o[e]=r.def(a.next,".",e),s[e]=r.def(a.current,".",e))});var f=e.constants={};Object.keys(oe).forEach(function(e){f[e]=r.def(JSON.stringify(oe[e]))}),e.invoke=function(t,r){switch(r.type){case 0:var i=["this",a.context,a.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return t.def(a.props,r.data);case 2:return t.def(a.context,r.data);case 3:return t.def("this",r.data);case 4:return r.data.append(e,t),r.data.ref}},e.attribCache={};var u={};return e.scopeAttrib=function(e){if((e=t.id(e))in u)return u[e];var r=c.scope[e];return r||(r=c.scope[e]=new V),u[e]=n(r)},e}function x(e,t){var n=e.static,r=e.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=f.getFramebuffer(i),M(function(e,t){var n=e.link(i),r=e.shared;return t.set(r.framebuffer,".next",n),r=r.context,t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n})):M(function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var a=r.framebuffer;return B(a,function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer;return n=t.def(i,".getFramebuffer(",n,")"),t.set(i,".next",n),r=r.context,t.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),t.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function k(e){function n(e){if(e in r){var n=t.id(r[e]);return(e=M(function(){return n})).id=n,e}if(e in i){var a=i[e];return B(a,function(e,t){var n=e.invoke(t,a);return t.def(e.shared.strings,".id(",n,")")})}return null}var r=e.static,i=e.dynamic,a=n("frag"),o=n("vert"),s=null;return z(a)&&z(o)?(s=l.program(o.id,a.id),e=M(function(e,t){return e.link(s)})):e=new C(a&&a.thisDep||o&&o.thisDep,a&&a.contextDep||o&&o.contextDep,a&&a.propDep||o&&o.propDep,function(e,t){var n,r,i=e.shared.shader;return n=a?a.append(e,t):t.def(i,".","frag"),r=o?o.append(e,t):t.def(i,".","vert"),t.def(i+".program("+r+","+n+")")}),{frag:a,vert:o,progVar:e,program:s}}function E(e,t){function n(e,t){if(e in r){var n=0|r[e];return M(function(e,r){return t&&(e.OFFSET=n),n})}if(e in i){var o=i[e];return B(o,function(e,n){var r=e.invoke(n,o);return t&&(e.OFFSET=r),r})}return t&&a?M(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,i=e.dynamic,a=function(){if("elements"in r){var e=r.elements;L(e)?e=o.getElements(o.create(e,!0)):e&&(e=o.getElements(e));var t=M(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r}return t.ELEMENTS=null});return t.value=e,t}if("elements"in i){var n=i.elements;return B(n,function(e,t){var r=(i=e.shared).isBufferArgs,i=i.elements,a=e.invoke(t,n),o=t.def("null");return r=t.def(r,"(",a,")"),a=e.cond(r).then(o,"=",i,".createStream(",a,");").else(o,"=",i,".getElements(",a,");"),t.entry(a),t.exit(e.cond(r).then(i,".destroyStream(",o,");")),e.ELEMENTS=o})}return null}(),s=n("offset",!0);return{elements:a,primitive:function(){if("primitive"in r){var e=r.primitive;return M(function(t,n){return te[e]})}if("primitive"in i){var t=i.primitive;return B(t,function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")})}return a?z(a)?a.value?M(function(e,t){return t.def(e.ELEMENTS,".primType")}):M(function(){return 4}):new C(a.thisDep,a.contextDep,a.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):null}(),count:function(){if("count"in r){var e=0|r.count;return M(function(){return e})}if("count"in i){var t=i.count;return B(t,function(e,n){return e.invoke(n,t)})}return a?z(a)?a?s?new C(s.thisDep,s.contextDep,s.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):M(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):M(function(){return-1}):new C(a.thisDep||s.thisDep,a.contextDep||s.contextDep,a.propDep||s.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:s}}function A(e,n){var r=e.static,i=e.dynamic,o={};return Object.keys(r).forEach(function(e){var n=r[e],i=t.id(e),s=new V;if(L(n))s.state=1,s.buffer=a.getBuffer(a.create(n,34962,!1,!0)),s.type=0;else if(u=a.getBuffer(n))s.state=1,s.buffer=u,s.type=0;else if("constant"in n){var f=n.constant;s.buffer="null",s.state=2,"number"==typeof f?s.x=f:be.forEach(function(e,t){t<f.length&&(s[e]=f[t])})}else{var u=L(n.buffer)?a.getBuffer(a.create(n.buffer,34962,!1,!0)):a.getBuffer(n.buffer),c=0|n.offset,l=0|n.stride,p=0|n.size,d=!!n.normalized,h=0;"type"in n&&(h=K[n.type]),n=0|n.divisor,s.buffer=u,s.state=1,s.size=p,s.normalized=d,s.type=h||u.dtype,s.offset=c,s.stride=l,s.divisor=n}o[e]=M(function(e,t){var n=e.attribCache;if(i in n)return n[i];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[i]=r})}),Object.keys(i).forEach(function(e){var t=i[e];o[e]=B(t,function(e,n){function r(e){n(f[e],"=",i,".",e,"|0;")}var i=e.invoke(n,t),a=e.shared,o=a.isBufferArgs,s=a.buffer,f={isStream:n.def(!1)},u=new V;u.state=1,Object.keys(u).forEach(function(e){f[e]=n.def(""+u[e])});var c=f.buffer,l=f.type;return n("if(",o,"(",i,")){",f.isStream,"=true;",c,"=",s,".createStream(",34962,",",i,");",l,"=",c,".dtype;","}else{",c,"=",s,".getBuffer(",i,");","if(",c,"){",l,"=",c,".dtype;",'}else if("constant" in ',i,"){",f.state,"=",2,";","if(typeof "+i+'.constant === "number"){',f[be[0]],"=",i,".constant;",be.slice(1).map(function(e){return f[e]}).join("="),"=0;","}else{",be.map(function(e,t){return f[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",o,"(",i,".buffer)){",c,"=",s,".createStream(",34962,",",i,".buffer);","}else{",c,"=",s,".getBuffer(",i,".buffer);","}",l,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",f.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",f.isStream,"){",s,".destroyStream(",c,");","}"),f})}),o}function D(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach(function(a){t.save(r,"."+a),i(r,".",a,"=",n[a].append(e,t),";")}),t(i)}function T(e,t,n,r){var i,a=(s=e.shared).gl,o=s.framebuffer;Z&&(i=t.def(s.extensions,".webgl_draw_buffers"));var s=(f=e.constants).drawBuffer,f=f.backBuffer;e=n?n.append(e,t):t.def(o,".next"),r||t("if(",e,"!==",o,".cur){"),t("if(",e,"){",a,".bindFramebuffer(",36160,",",e,".framebuffer);"),Z&&t(i,".drawBuffersWEBGL(",s,"[",e,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",36160,",null);"),Z&&t(i,".drawBuffersWEBGL(",f,");"),t("}",o,".cur=",e,";"),r||t("}")}function _(e,t,n){var r=e.shared,a=r.gl,o=e.current,s=e.next,f=r.current,u=r.next,c=e.cond(f,".dirty");ne.forEach(function(t){var r,l;if(!((t=y(t))in n.state))if(t in s){r=s[t],l=o[t];var p=i($[t].length,function(e){return c.def(r,"[",e,"]")});c(e.cond(p.map(function(e,t){return e+"!=="+l+"["+t+"]"}).join("||")).then(a,".",ie[t],"(",p,");",p.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";"))}else r=c.def(u,".",t),p=e.cond(r,"!==",f,".",t),c(p),t in re?p(e.cond(r).then(a,".enable(",re[t],");").else(a,".disable(",re[t],");"),f,".",t,"=",r,";"):p(a,".",ie[t],"(",r,");",f,".",t,"=",r,";")}),0===Object.keys(n.state).length&&c(f,".dirty=false;"),t(c)}function S(e,t,n,r){var i=e.shared,a=e.current,o=i.current,s=i.gl;F(Object.keys(n)).forEach(function(i){var f=n[i];if(!r||r(f)){var u=f.append(e,t);if(re[i]){var c=re[i];z(f)?t(s,u?".enable(":".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",i,"=",u,";")}else if(m(u)){var l=a[i];t(s,".",ie[i],"(",u,");",u.map(function(e,t){return l+"["+t+"]="+e}).join(";"),";")}else t(s,".",ie[i],"(",u,");",o,".",i,"=",u,";")}})}function j(e,t){J&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function P(e,t,n,r,i){function a(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(e){e(u=t.def(),"=",a(),";"),"string"==typeof i?e(p,".count+=",i,";"):e(p,".count++;"),h&&(r?e(c=t.def(),"=",m,".getNumPendingQueries();"):e(m,".beginQuery(",p,");"))}function s(e){e(p,".cpuTime+=",a(),"-",u,";"),h&&(r?e(m,".pushScopeStats(",c,",",m,".getNumPendingQueries(),",p,");"):e(m,".endQuery();"))}function f(e){var n=t.def(d,".profile");t(d,".profile=",e,";"),t.exit(d,".profile=",n,";")}var u,c,l=e.shared,p=e.stats,d=l.current,m=l.timer;if(n=n.profile){if(z(n))return void(n.enable?(o(t),s(t.exit),f("true")):f("false"));f(n=n.append(e,t))}else n=t.def(d,".profile");o(l=e.block()),t("if(",n,"){",l,"}"),s(e=e.block()),t.exit("if(",n,"){",e,"}")}function I(e,t,n,r,i){function a(n,r,i){function a(){t("if(!",c,".buffer){",f,".enableVertexAttribArray(",u,");}");var n,a=i.type;n=i.size?t.def(i.size,"||",r):r,t("if(",c,".type!==",a,"||",c,".size!==",n,"||",d.map(function(e){return c+"."+e+"!=="+i[e]}).join("||"),"){",f,".bindBuffer(",34962,",",l,".buffer);",f,".vertexAttribPointer(",[u,n,a,i.normalized,i.stride,i.offset],");",c,".type=",a,";",c,".size=",n,";",d.map(function(e){return c+"."+e+"="+i[e]+";"}).join(""),"}"),J&&(a=i.divisor,t("if(",c,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,a],");",c,".divisor=",a,";}"))}function s(){t("if(",c,".buffer){",f,".disableVertexAttribArray(",u,");","}if(",be.map(function(e,t){return c+"."+e+"!=="+p[t]}).join("||"),"){",f,".vertexAttrib4f(",u,",",p,");",be.map(function(e,t){return c+"."+e+"="+p[t]+";"}).join(""),"}")}var f=o.gl,u=t.def(n,".location"),c=t.def(o.attributes,"[",u,"]");n=i.state;var l=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];1===n?a():2===n?s():(t("if(",n,"===",1,"){"),a(),t("}else{"),s(),t("}"))}var o=e.shared;r.forEach(function(r){var o,s=r.name,f=n.attributes[s];if(f){if(!i(f))return;o=f.append(e,t)}else{if(!i(De))return;var u=e.scopeAttrib(s);o={},Object.keys(new V).forEach(function(e){o[e]=t.def(u,".",e)})}a(e.link(r),function(e){switch(r.info.type){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(),o)})}function W(e,n,r,a,o){for(var s,f=e.shared,u=f.gl,c=0;c<a.length;++c){var l,p=(g=a[c]).name,d=g.info.type,h=r.uniforms[p],g=e.link(g)+".location";if(h){if(!o(h))continue;if(z(h)){if(p=h.value,35678===d||35680===d)n(u,".uniform1i(",g,",",(d=e.link(p._texture||p.color[0]._texture))+".bind());"),n.exit(d,".unbind();");else if(35674===d||35675===d||35676===d)h=2,35675===d?h=3:35676===d&&(h=4),n(u,".uniformMatrix",h,"fv(",g,",false,",p=e.global.def("new Float32Array(["+Array.prototype.slice.call(p)+"])"),");");else{switch(d){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}n(u,".uniform",s,"(",g,",",m(p)?Array.prototype.slice.call(p):p,");")}continue}l=h.append(e,n)}else{if(!o(De))continue;l=n.def(f.uniforms,"[",t.id(p),"]")}switch(35678===d?n("if(",l,"&&",l,'._reglType==="framebuffer"){',l,"=",l,".color[0];","}"):35680===d&&n("if(",l,"&&",l,'._reglType==="framebufferCube"){',l,"=",l,".color[0];","}"),p=1,d){case 35678:case 35680:d=n.def(l,"._texture"),n(u,".uniform1i(",g,",",d,".bind());"),n.exit(d,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",p=2;break;case 35668:case 35672:s="3i",p=3;break;case 35669:case 35673:s="4i",p=4;break;case 5126:s="1f";break;case 35664:s="2f",p=2;break;case 35665:s="3f",p=3;break;case 35666:s="4f",p=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(n(u,".uniform",s,"(",g,","),"M"===s.charAt(0)){g=Math.pow(d-35674+2,2);var y=e.global.def("new Float32Array(",g,")");n("false,(Array.isArray(",l,")||",l," instanceof Float32Array)?",l,":(",i(g,function(e){return y+"["+e+"]="+l+"["+e+"]"}),",",y,")")}else n(1<p?i(p,function(e){return l+"["+e+"]"}):l);n(");")}}function H(e,t,n,r){function i(i){var a=p[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(l,".",i)}function a(){function e(){n(f,".drawElementsInstancedANGLE(",[h,g,y,m+"<<(("+y+"-5121)>>1)",s],");")}function t(){n(f,".drawArraysInstancedANGLE(",[h,m,g,s],");")}d?v?e():(n("if(",d,"){"),e(),n("}else{"),t(),n("}")):t()}function o(){function e(){n(c+".drawElements("+[h,g,y,m+"<<(("+y+"-5121)>>1)"]+");")}function t(){n(c+".drawArrays("+[h,m,g]+");")}d?v?e():(n("if(",d,"){"),e(),n("}else{"),t(),n("}")):t()}var s,f,u=e.shared,c=u.gl,l=u.draw,p=r.draw,d=function(){var i=p.elements,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),i=i.append(e,a)):i=a.def(l,".","elements"),i&&a("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),h=i("primitive"),m=i("offset"),g=function(){var i=p.count,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),i=i.append(e,a)):i=a.def(l,".","count"),i}();if("number"==typeof g){if(0===g)return}else n("if(",g,"){"),n.exit("}");J&&(s=i("instances"),f=e.instancing);var y=d+".type",v=p.elements&&z(p.elements);J&&("number"!=typeof s||0<=s)?"string"==typeof s?(n("if(",s,">0){"),a(),n("}else if(",s,"<0){"),o(),n("}")):a():o()}function Y(e,t,n,r,i){return i=(t=w()).proc("body",i),J&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,n,r),t.compile().body}function q(e,t,n,r){j(e,t),I(e,t,n,r.attributes,function(){return!0}),W(e,t,n,r.uniforms,function(){return!0}),H(e,t,t,n)}function U(e,t,n,r){function i(){return!0}e.batchId="a1",j(e,t),I(e,t,n,r.attributes,i),W(e,t,n,r.uniforms,i),H(e,t,t,n)}function N(e,t,n,r){function i(e){return e.contextDep&&o||e.propDep}function a(e){return!i(e)}j(e,t);var o=n.contextDep,s=t.def(),f=t.def();e.shared.props=f,e.batchId=s;var u=e.scope(),c=e.scope();t(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",f,"=","a0","[",s,"];",c,"}",u.exit),n.needsContext&&D(e,c,n.context),n.needsFramebuffer&&T(e,c,n.framebuffer),S(e,c,n.state,i),n.profile&&i(n.profile)&&P(e,c,n,!1,!0),r?(I(e,u,n,r.attributes,a),I(e,c,n,r.attributes,i),W(e,u,n,r.uniforms,a),W(e,c,n,r.uniforms,i),H(e,u,c,n)):(t=e.global.def("{}"),r=n.shader.progVar.append(e,c),f=c.def(r,".id"),u=c.def(t,"[",f,"]"),c(e.shared.gl,".useProgram(",r,".program);","if(!",u,"){",u,"=",t,"[",f,"]=",e.link(function(t){return Y(U,e,n,t,2)}),"(",r,");}",u,".call(this,a0[",s,"],",s,");"))}function Q(e,n){function r(t){var r=n.shader[t];r&&i.set(a.shader,"."+t,r.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var a=e.shared,o=a.current;D(e,i,n.context),n.framebuffer&&n.framebuffer.append(e,i),F(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,i);m(r)?r.forEach(function(n,r){i.set(e.next[t],"["+r+"]",n)}):i.set(a.next,"."+t,r)}),P(e,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var r=n.draw[t];r&&i.set(a.draw,"."+t,""+r.append(e,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(a.uniforms,"["+t.id(r)+"]",n.uniforms[r].append(e,i))}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,i),a=e.scopeAttrib(t);Object.keys(new V).forEach(function(e){i.set(a,"."+e,r[e])})}),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(o,".dirty=true;"),i.exit(o,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function G(e,t,n){var r=t.static[n];if(r&&function(e){if("object"==typeof e&&!m(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(R.isDynamic(e[t[n]]))return!0;return!1}}(r)){var i=e.global,a=Object.keys(r),o=!1,s=!1,f=!1,u=e.global.def("{}");a.forEach(function(t){var n=r[t];if(R.isDynamic(n))"function"==typeof n&&(n=r[t]=R.unbox(n)),t=B(n,null),o=o||t.thisDep,f=f||t.propDep,s=s||t.contextDep;else{switch(i(u,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}}),t.dynamic[n]=new R.DynamicVariable(4,{thisDep:o,contextDep:s,propDep:f,ref:u,append:function(e,t){a.forEach(function(n){var i=r[n];R.isDynamic(i)&&(i=e.invoke(t,i),t(u,".",n,"=",i,";"))})}}),delete t.static[n]}}var V=c.Record,X={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(X.min=32775,X.max=32776);var J=n.angle_instanced_arrays,Z=n.webgl_draw_buffers,$={dirty:!0,profile:g.profile},ee={},ne=[],re={},ie={};v("dither",3024),v("blend.enable",3042),b("blend.color","blendColor",[0,0,0,0]),b("blend.equation","blendEquationSeparate",[32774,32774]),b("blend.func","blendFuncSeparate",[1,0,1,0]),v("depth.enable",2929,!0),b("depth.func","depthFunc",513),b("depth.range","depthRange",[0,1]),b("depth.mask","depthMask",!0),b("colorMask","colorMask",[!0,!0,!0,!0]),v("cull.enable",2884),b("cull.face","cullFace",1029),b("frontFace","frontFace",2305),b("lineWidth","lineWidth",1),v("polygonOffset.enable",32823),b("polygonOffset.offset","polygonOffset",[0,0]),v("sample.alpha",32926),v("sample.enable",32928),b("sample.coverage","sampleCoverage",[1,!1]),v("stencil.enable",2960),b("stencil.mask","stencilMask",-1),b("stencil.func","stencilFunc",[519,0,-1]),b("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),b("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),v("scissor.enable",3089),b("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),b("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var ae={gl:e,context:d,strings:t,next:ee,current:$,draw:p,elements:o,buffer:a,shader:l,attributes:c.state,uniforms:u,framebuffer:f,extensions:n,timer:h,isBufferArgs:L},oe={primTypes:te,compareFuncs:ke,blendFuncs:xe,blendEquations:X,stencilOps:Ee,glTypes:K,orientationType:Ae};Z&&(oe.backBuffer=[1029],oe.drawBuffer=i(r.maxDrawbuffers,function(e){return 0===e?[0]:i(e,function(e){return 36064+e})}));var se=0;return{next:ee,current:$,procs:function(){var e=w(),t=e.proc("poll"),n=e.proc("refresh"),a=e.block();t(a),n(a);var o,s=e.shared,f=s.gl,u=s.next,c=s.current;a(c,".dirty=false;"),T(e,t),T(e,n,null,!0),J&&(o=e.link(J));for(var l=0;l<r.maxAttributes;++l){var p=n.def(s.attributes,"[",l,"]"),d=e.cond(p,".buffer");d.then(f,".enableVertexAttribArray(",l,");",f,".bindBuffer(",34962,",",p,".buffer.buffer);",f,".vertexAttribPointer(",l,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(f,".disableVertexAttribArray(",l,");",f,".vertexAttrib4f(",l,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),n(d),J&&n(o,".vertexAttribDivisorANGLE(",l,",",p,".divisor);")}return Object.keys(re).forEach(function(r){var i=re[r],o=a.def(u,".",r),s=e.block();s("if(",o,"){",f,".enable(",i,")}else{",f,".disable(",i,")}",c,".",r,"=",o,";"),n(s),t("if(",o,"!==",c,".",r,"){",s,"}")}),Object.keys(ie).forEach(function(r){var o,s,l=ie[r],p=$[r],d=e.block();d(f,".",l,"("),m(p)?(l=p.length,o=e.global.def(u,".",r),s=e.global.def(c,".",r),d(i(l,function(e){return o+"["+e+"]"}),");",i(l,function(e){return s+"["+e+"]="+o+"["+e+"];"}).join("")),t("if(",i(l,function(e){return o+"["+e+"]!=="+s+"["+e+"]"}).join("||"),"){",d,"}")):(o=a.def(u,".",r),s=a.def(c,".",r),d(o,");",c,".",r,"=",o,";"),t("if(",o,"!==",s,"){",d,"}")),n(d)}),e.compile()}(),compile:function(e,t,n,r,a){var o=w();return o.stats=o.link(a),Object.keys(t.static).forEach(function(e){G(o,t,e)}),we.forEach(function(t){G(o,e,t)}),n=function(e,t,n,r,a){var o=x(e),s=function(e,t,n){function r(e){if(e in i){var n=i[e];e=!0;var r,o,s=0|n.x,f=0|n.y;return"width"in n?r=0|n.width:e=!1,"height"in n?o=0|n.height:e=!1,new C(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var i=e.shared.context,a=r;"width"in n||(a=t.def(i,".","framebufferWidth","-",s));var u=o;return"height"in n||(u=t.def(i,".","framebufferHeight","-",f)),[s,f,a,u]})}if(e in a){var u=a[e];return e=B(u,function(e,t){var n=e.invoke(t,u),r=e.shared.context,i=t.def(n,".x|0"),a=t.def(n,".y|0");return[i,a,t.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",a,")")]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new C(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var i=e.static,a=e.dynamic;if(e=r("viewport")){var o=e;e=new C(e.thisDep,e.contextDep,e.propDep,function(e,t){var n=o.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n})}return{viewport:e,scissor_box:r("scissor.box")}}(e,o),f=E(e),u=function(e,t){var n=e.static,r=e.dynamic,a={};return ne.forEach(function(e){function t(t,i){if(e in n){var s=t(n[e]);a[o]=M(function(){return s})}else if(e in r){var f=r[e];a[o]=B(f,function(e,t){return i(e,t,e.invoke(t,f))})}}var o=y(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,n){return n});case"depth.func":return t(function(e){return ke[e]},function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")});case"depth.range":return t(function(e){return e},function(e,t,n){return[t.def("+",n,"[0]"),t=t.def("+",n,"[1]")]});case"blend.func":return t(function(e){return[xe["srcRGB"in e?e.srcRGB:e.src],xe["dstRGB"in e?e.dstRGB:e.dst],xe["srcAlpha"in e?e.srcAlpha:e.src],xe["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,n){function r(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}e=e.constants.blendFuncs;var i=r("src","RGB"),a=r("dst","RGB"),o=(i=t.def(e,"[",i,"]"),t.def(e,"[",r("src","Alpha"),"]"));return[i,a=t.def(e,"[",a,"]"),o,e=t.def(e,"[",r("dst","Alpha"),"]")]});case"blend.equation":return t(function(e){return"string"==typeof e?[X[e],X[e]]:"object"==typeof e?[X[e.rgb],X[e.alpha]]:void 0},function(e,t,n){var r=e.constants.blendEquations,i=t.def(),a=t.def();return(e=e.cond("typeof ",n,'==="string"')).then(i,"=",a,"=",r,"[",n,"];"),e.else(i,"=",r,"[",n,".rgb];",a,"=",r,"[",n,".alpha];"),t(e),[i,a]});case"blend.color":return t(function(e){return i(4,function(t){return+e[t]})},function(e,t,n){return i(4,function(e){return t.def("+",n,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,n){return t.def(n,"|0")});case"stencil.func":return t(function(e){return[ke[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,n){return[e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680),t.def(n,".ref|0"),t=t.def('"mask" in ',n,"?",n,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,Ee[t.fail||"keep"],Ee[t.zfail||"keep"],Ee[t.zpass||"keep"]]},function(t,n,r){function i(e){return n.def('"',e,'" in ',r,"?",a,"[",r,".",e,"]:",7680)}var a=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,n){return[t.def(n,".factor|0"),t=t.def(n,".units|0")]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,n){return n});case"frontFace":return t(function(e){return Ae[e]},function(e,t,n){return t.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,n){return i(4,function(e){return"!!"+n+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,n){return[t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert")]})}}),a}(e),c=k(e),l=s.viewport;return l&&(u.viewport=l),(s=s[l=y("scissor.box")])&&(u[l]=s),(o={framebuffer:o,draw:f,shader:c,state:u,dirty:s=0<Object.keys(u).length}).profile=function(e){var t,n=e.static;if(e=e.dynamic,"profile"in n){var r=!!n.profile;(t=M(function(e,t){return r})).enable=r}else if("profile"in e){var i=e.profile;t=B(i,function(e,t){return e.invoke(t,i)})}return t}(e),o.uniforms=function(e,t){var n=e.static,r=e.dynamic,a={};return Object.keys(n).forEach(function(e){var t,r=n[e];if("number"==typeof r||"boolean"==typeof r)t=M(function(){return r});else if("function"==typeof r){var o=r._reglType;"texture2d"===o||"textureCube"===o?t=M(function(e){return e.link(r)}):"framebuffer"!==o&&"framebufferCube"!==o||(t=M(function(e){return e.link(r.color[0])}))}else m(r)&&(t=M(function(e){return e.global.def("[",i(r.length,function(e){return r[e]}),"]")}));t.value=r,a[e]=t}),Object.keys(r).forEach(function(e){var t=r[e];a[e]=B(t,function(e,n){return e.invoke(n,t)})}),a}(n),o.attributes=A(t),o.context=function(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=M(function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=B(t,function(e,n){return e.invoke(n,t)})}),r}(r),o}(e,t,n,r),function(e,t){var n=e.proc("draw",1);j(e,n),D(e,n,t.context),T(e,n,t.framebuffer),_(e,n,t),S(e,n,t.state),P(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)q(e,n,t,t.shader.program);else{var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link(function(n){return Y(q,e,t,n,1)}),"(",r,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}(o,n),Q(o,n),function(e,t){function n(e){return e.contextDep&&i||e.propDep}var r=e.proc("batch",2);e.batchId="0",j(e,r);var i=!1,a=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(D(e,r,t.context),a=!1);var o=!1;if((s=t.framebuffer)?(s.propDep?i=o=!0:s.contextDep&&i&&(o=!0),o||T(e,r,s)):T(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),_(e,r,t),S(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||P(e,r,t,!1,"a1"),t.contextDep=i,t.needsContext=a,t.needsFramebuffer=o,(a=t.shader.progVar).contextDep&&i||a.propDep)N(e,r,t,null);else if(a=a.append(e,r),r(e.shared.gl,".useProgram(",a,".program);"),t.shader.program)N(e,r,t,t.shader.program);else{var s=e.global.def("{}"),f=(o=r.def(a,".id"),r.def(s,"[",o,"]"));r(e.cond(f).then(f,".call(this,a0,a1);").else(f,"=",s,"[",o,"]=",e.link(function(n){return Y(N,e,t,n,2)}),"(",a,");",f,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}(o,n),o.compile()}}}function I(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var W=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},H=0,R={DynamicVariable:e,define:function(n,r){return new e(n,t(r+""))},isDynamic:function(t){return"function"==typeof t&&!t._reglType||t instanceof e},unbox:function(t,n){return"function"==typeof t?new e(0,t):t},accessor:t},Y={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},q="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},U=o();U.zero=o();var N=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063));var a=!!t.oes_texture_float;if(a){a=e.createTexture(),e.bindTexture(3553,a),e.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var o=e.createFramebuffer();if(e.bindFramebuffer(36160,o),e.framebufferTexture2D(36160,36064,3553,a,0),e.bindTexture(3553,null),36053!==e.checkFramebufferStatus(36160))a=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(16384);var s=U.allocType(5126,4);e.readPixels(0,0,1,1,6408,5126,s),e.getError()?a=!1:(e.deleteFramebuffer(o),e.deleteTexture(a),a=1===s[0]),U.freeType(s)}}return s=!0,s=e.createTexture(),o=U.allocType(5121,36),e.activeTexture(33984),e.bindTexture(34067,s),e.texImage2D(34069,0,6408,3,3,0,6408,5121,o),U.freeType(o),e.bindTexture(34067,null),e.deleteTexture(s),s=!e.getError(),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938),readFloat:a,npotTextureCube:s}},Q=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},G=function(e){return Object.keys(e).map(function(t){return e[t]})},V={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;switch(n=r||U.allocType(n,i),t.length){case 0:break;case 1:for(r=t[0],t=0;t<r;++t)n[t]=e[t];break;case 2:for(r=t[0],t=t[1],a=i=0;a<r;++a)for(var o=e[a],s=0;s<t;++s)n[i++]=o[s];break;case 3:f(e,t[0],t[1],t[2],n,0);break;default:!function e(t,n,r,i,a){for(var o=1,s=r+1;s<n.length;++s)o*=n[s];var u=n[r];if(4==n.length-r){var c=n[r+1],l=n[r+2];for(n=n[r+3],s=0;s<u;++s)f(t[s],c,l,n,i,a),a+=o}else for(s=0;s<u;++s)e(t[s],n,r+1,i,a),a+=o}(e,t,0,n,0)}return n}},X={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},K={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},J={dynamic:35048,stream:35040,static:35044},Z=V.flatten,$=V.shape,ee=[];ee[5120]=1,ee[5122]=2,ee[5124]=4,ee[5121]=1,ee[5123]=2,ee[5125]=4,ee[5126]=4;var te={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ne=new Float32Array(1),re=new Uint32Array(ne.buffer),ie=[9984,9986,9985,9987],ae=[0,6409,6410,6407,6408],oe={};oe[6409]=oe[6406]=oe[6402]=1,oe[34041]=oe[6410]=2,oe[6407]=oe[35904]=3,oe[6408]=oe[35906]=4;var se=g("HTMLCanvasElement"),fe=g("CanvasRenderingContext2D"),ue=g("ImageBitmap"),ce=g("HTMLImageElement"),le=g("HTMLVideoElement"),pe=Object.keys(X).concat([se,fe,ue,ce,le]),de=[];de[5121]=1,de[5126]=4,de[36193]=2,de[5123]=2,de[5125]=4;var he=[];he[32854]=2,he[32855]=2,he[36194]=2,he[34041]=4,he[33776]=.5,he[33777]=.5,he[33778]=1,he[33779]=1,he[35986]=.5,he[35987]=1,he[34798]=1,he[35840]=.5,he[35841]=.25,he[35842]=.5,he[35843]=.25,he[36196]=.5;var me=[];me[32854]=2,me[32855]=2,me[36194]=2,me[33189]=2,me[36168]=1,me[34041]=4,me[35907]=4,me[34836]=16,me[34842]=8,me[34843]=6;var ge=function(e,t,n,r,i){function a(e){this.id=u++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function o(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var f=[];Object.keys(s).forEach(function(e){f[s[e]]=e});var u=0,c={};return a.prototype.decRef=function(){0>=--this.refCount&&o(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,n){function o(t,n){var r=0,a=0,c=32854;if("object"==typeof t&&t?("shape"in t?(r=0|(a=t.shape)[0],a=0|a[1]):("radius"in t&&(r=a=0|t.radius),"width"in t&&(r=0|t.width),"height"in t&&(a=0|t.height)),"format"in t&&(c=s[t.format])):"number"==typeof t?(r=0|t,a="number"==typeof n?0|n:r):t||(r=a=1),r!==u.width||a!==u.height||c!==u.format)return o.width=u.width=r,o.height=u.height=a,u.format=c,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,c,r,a),i.profile&&(u.stats.size=me[u.format]*u.width*u.height),o.format=f[u.format],o}var u=new a(e.createRenderbuffer());return c[u.id]=u,r.renderbufferCount++,o(t,n),o.resize=function(t,n){var r=0|t,a=0|n||r;return r===u.width&&a===u.height?o:(o.width=u.width=r,o.height=u.height=a,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,u.format,r,a),i.profile&&(u.stats.size=me[u.format]*u.width*u.height),o)},o._reglType="renderbuffer",o._renderbuffer=u,i.profile&&(o.stats=u.stats),o.destroy=function(){u.decRef()},o},clear:function(){G(c).forEach(o)},restore:function(){G(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},ye=[];ye[6408]=4,ye[6407]=3;var ve=[];ve[5121]=1,ve[5126]=4,ve[36193]=2;var be=["x","y","z","w"],we="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),xe={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ke={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ee={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ae={cw:2304,ccw:2305},De=new C(!1,!1,!1,function(){});return function(e){function t(){if(0===K.length)S&&S.update(),ee=null;else{ee=Y.next(t),h();for(var e=K.length-1;0<=e;--e){var n=K[e];n&&n(F,null,0)}y.flush(),S&&S.update()}}function i(){!ee&&0<K.length&&(ee=Y.next(t))}function a(){ee&&(Y.cancel(t),ee=null)}function o(e){e.preventDefault(),a(),J.forEach(function(e){e()})}function s(e){y.getError(),b.restore(),B.restore(),z.restore(),H.restore(),U.restore(),Q.restore(),S&&S.restore(),G.procs.refresh(),i(),Z.forEach(function(e){e()})}function f(e){function t(e){var t={},n={};return Object.keys(e).forEach(function(r){var i=e[r];R.isDynamic(i)?n[r]=R.unbox(i,r):t[r]=i}),{dynamic:n,static:t}}var n=t(e.context||{}),r=t(e.uniforms||{}),i=t(e.attributes||{}),a=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=W({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}(e));e={gpuTime:0,cpuTime:0,count:0};var o=(n=G.compile(a,i,r,n,e)).draw,s=n.batch,f=n.scope,u=[];return W(function(e,t){var n;if("function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else{if(!Array.isArray(e))return f.call(this,e,t,0);for(n=0;n<e.length;++n)f.call(this,e[n],t,n)}else if("number"==typeof e){if(0<e)return s.call(this,function(e){for(;u.length<e;)u.push(null);return u}(0|e),0|e)}else{if(!Array.isArray(e))return o.call(this,e);if(e.length)return s.call(this,e,e.length)}},{stats:e})}function u(e,t){var n=0;G.procs.poll();var r=t.color;r&&(y.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(y.clearDepth(+t.depth),n|=256),"stencil"in t&&(y.clearStencil(0|t.stencil),n|=1024),y.clear(n)}function c(e){return K.push(e),i(),{cancel:function(){var t=I(K,e);K[t]=function e(){var t=I(K,e);K[t]=K[K.length-1],--K.length,0>=K.length&&a()}}}}function l(){var e=V.viewport,t=V.scissor_box;e[0]=e[1]=t[0]=t[1]=0,F.viewportWidth=F.framebufferWidth=F.drawingBufferWidth=e[2]=t[2]=y.drawingBufferWidth,F.viewportHeight=F.framebufferHeight=F.drawingBufferHeight=e[3]=t[3]=y.drawingBufferHeight}function h(){F.tick+=1,F.time=g(),l(),G.procs.poll()}function m(){l(),G.procs.refresh(),S&&S.update()}function g(){return(q()-j)/1e3}if(!(e=function(e){var t,i,a,o,s=e||{};e={};var f=[],u=[],c="undefined"==typeof window?1:window.devicePixelRatio,l=!1,p=function(e){},d=function(){};if("string"==typeof s?t=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?t=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?a=(o=s).canvas:("gl"in s?o=s.gl:"canvas"in s?a=r(s.canvas):"container"in s&&(i=r(s.container)),"attributes"in s&&(e=s.attributes),"extensions"in s&&(f=n(s.extensions)),"optionalExtensions"in s&&(u=n(s.optionalExtensions)),"onDone"in s&&(p=s.onDone),"profile"in s&&(l=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?a=t:i=t),!o){if(!a){if(!(t=function(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;e!==document.body&&(t=(r=e.getBoundingClientRect()).right-r.left,r=r.bottom-r.top),i.width=n*t,i.height=n*r,W(i.style,{width:t+"px",height:r+"px"})}var i=document.createElement("canvas");return W(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",W(e.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),e.removeChild(i)}}}(i||document.body,0,c)))return null;a=t.canvas,d=t.onDestroy}o=function(e,t){function n(n){try{return e.getContext(n,t)}catch(a){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}(a,e)}return o?{gl:o,canvas:a,container:i,extensions:f,optionalExtensions:u,pixelRatio:c,profile:l,onDone:p,onDestroy:d}:(d(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(e)))return null;var y=e.gl,v=y.getContextAttributes();y.isContextLost();var b=function(e,t){function n(t){var n;t=t.toLowerCase();try{n=r[t]=e.getExtension(t)}catch(i){}return!!n}for(var r={},i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!n(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(!n(e))throw Error("(regl): error restoring extension "+e)})}}}(y,e);if(!b)return null;var w=function(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}(),x={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},k=b.extensions,S=function(e,t){function n(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function r(e,t,r){var i=s.pop()||new n;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=r,f.push(i)}var i=k.ext_disjoint_timer_query;if(!i)return null;var a=[],o=[],s=[],f=[],u=[],c=[];return{beginQuery:function(e){var t=a.pop()||i.createQueryEXT();i.beginQueryEXT(35007,t),o.push(t),r(o.length-1,o.length,e)},endQuery:function(){i.endQueryEXT(35007)},pushScopeStats:r,update:function(){var e,t;if(0!==(e=o.length)){c.length=Math.max(c.length,e+1),u.length=Math.max(u.length,e+1),u[0]=0;var n=c[0]=0;for(t=e=0;t<o.length;++t){var r=o[t];i.getQueryObjectEXT(r,34919)?(n+=i.getQueryObjectEXT(r,34918),a.push(r)):o[e++]=r,u[t+1]=n,c[t+1]=e}for(o.length=e,t=e=0;t<f.length;++t){var l=(n=f[t]).startQueryIndex;r=n.endQueryIndex,n.sum+=u[r]-u[l],l=c[l],(r=c[r])===l?(n.stats.gpuTime+=n.sum/1e6,s.push(n)):(n.startQueryIndex=l,n.endQueryIndex=r,f[e++]=n)}f.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){a.push.apply(a,o);for(var e=0;e<a.length;e++)i.deleteQueryEXT(a[e]);o.length=0,a.length=0},restore:function(){o.length=0,a.length=0}}}(),j=q(),O=y.drawingBufferWidth,L=y.drawingBufferHeight,F={tick:0,time:0,viewportWidth:O,viewportHeight:L,framebufferWidth:O,framebufferHeight:L,drawingBufferWidth:O,drawingBufferHeight:L,pixelRatio:e.pixelRatio},C=N(y,k),z=(O=function(e,t,n,r){for(e=n.maxAttributes,t=Array(e),n=0;n<e;++n)t[n]=new D;return{Record:D,scope:{},state:t}}(y,k,C),p(y,x,e,O)),M=d(y,k,z,x),B=T(y,w,x,e),H=E(y,k,C,function(){G.procs.poll()},F,x,e),U=ge(y,k,0,x,e),Q=A(y,k,C,H,U,x),G=P(y,w,k,C,z,M,0,Q,{},O,B,{elements:null,primitive:4,count:-1,offset:0,instances:-1},F,S,e),V=(w=_(y,Q,G.procs.poll,F),G.next),X=y.canvas,K=[],J=[],Z=[],$=[e.onDestroy],ee=null;X&&(X.addEventListener("webglcontextlost",o,!1),X.addEventListener("webglcontextrestored",s,!1));var te=Q.setFBO=f({framebuffer:R.define.call(null,1,"framebuffer")});return m(),v=W(f,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)te(W({framebuffer:e.framebuffer.faces[t]},e),u);else te(e,u);else u(0,e)},prop:R.define.bind(null,1),context:R.define.bind(null,2),this:R.define.bind(null,3),draw:f({}),buffer:function(e){return z.create(e,34962,!1,!1)},elements:function(e){return M.create(e,!1)},texture:H.create2D,cube:H.createCube,renderbuffer:U.create,framebuffer:Q.create,framebufferCube:Q.createCube,attributes:v,frame:c,on:function(e,t){var n;switch(e){case"frame":return c(t);case"lost":n=J;break;case"restore":n=Z;break;case"destroy":n=$}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:C,hasExtension:function(e){return 0<=C.extensions.indexOf(e.toLowerCase())},read:w,destroy:function(){K.length=0,a(),X&&(X.removeEventListener("webglcontextlost",o),X.removeEventListener("webglcontextrestored",s)),B.clear(),Q.clear(),U.clear(),H.clear(),M.clear(),z.clear(),S&&S.clear(),$.forEach(function(e){e()})},_gl:y,_refresh:m,poll:function(){h(),S&&S.update()},now:g,stats:x}),e.onDone(null,v),v}},"object"==typeof t.exports?t.exports=e():"function"==typeof define&&define.amd?define(e):this.createREGL=e(),t=t.exports;var n=["manifest","onDone","onProgress","onError"],r=["type","src","stream","credentials","parser"],i=["onData","onDone"],a=-1,o=0,s=1;function f(e){throw new Error("resl: "+e)}function u(e,t,n){Object.keys(e).forEach(function(e){t.indexOf(e)<0&&f('invalid parameter "'+e+'" in '+n)})}function c(e,t){this.state=o,this.ready=!1,this.progress=0,this.name=e,this.cancel=t}var l={};function p(e){return e.target||e.srcElement||window}l.buttons=function(e){if("object"==typeof e){if("buttons"in e)return e.buttons;if("which"in e){if(2===(t=e.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t;if(1===(t=e.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},l.x=function(e){if("object"==typeof e){if("offsetX"in e)return e.offsetX;var t=p(e).getBoundingClientRect();return e.clientX-t.left}return 0},l.y=function(e){if("object"==typeof e){if("offsetY"in e)return e.offsetY;var t=p(e).getBoundingClientRect();return e.clientY-t.top}return 0};var d=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t},h=y,m=96;function g(e,t){var n=d(getComputedStyle(e).getPropertyValue(t));return n[0]*y(n[1],e)}function y(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=g(n,"font-size")/128;return t.removeChild(n),r}(e,t);case"em":return g(t,"font-size");case"rem":return g(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return m;case"cm":return m/2.54;case"mm":return m/25.4;case"pt":return m/72;case"pc":return m/6}return 1}var v,b=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},w=function(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e},x=function(e,t,n,r){var i,a,o,s,f,u,c,l,p,d,h=t[0],m=t[1],g=t[2],y=r[0],v=r[1],w=r[2],x=n[0],k=n[1],E=n[2];return Math.abs(h-x)<1e-6&&Math.abs(m-k)<1e-6&&Math.abs(g-E)<1e-6?b(e):(c=h-x,l=m-k,p=g-E,i=v*(p*=d=1/Math.sqrt(c*c+l*l+p*p))-w*(l*=d),a=w*(c*=d)-y*p,o=y*l-v*c,(d=Math.sqrt(i*i+a*a+o*o))?(i*=d=1/d,a*=d,o*=d):(i=0,a=0,o=0),s=l*o-p*a,f=p*i-c*o,u=c*a-l*i,(d=Math.sqrt(s*s+f*f+u*u))?(s*=d=1/d,f*=d,u*=d):(s=0,f=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=f,e[6]=l,e[7]=0,e[8]=o,e[9]=u,e[10]=p,e[11]=0,e[12]=-(i*h+a*m+o*g),e[13]=-(s*h+f*m+u*g),e[14]=-(c*h+l*m+p*g),e[15]=1,e)},k="undefined"!=typeof window,E={identity:b,multiply:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],f=t[5],u=t[6],c=t[7],l=t[8],p=t[9],d=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],b=n[0],w=n[1],x=n[2],k=n[3];return e[0]=b*r+w*s+x*l+k*m,e[1]=b*i+w*f+x*p+k*g,e[2]=b*a+w*u+x*d+k*y,e[3]=b*o+w*c+x*h+k*v,b=n[4],w=n[5],x=n[6],k=n[7],e[4]=b*r+w*s+x*l+k*m,e[5]=b*i+w*f+x*p+k*g,e[6]=b*a+w*u+x*d+k*y,e[7]=b*o+w*c+x*h+k*v,b=n[8],w=n[9],x=n[10],k=n[11],e[8]=b*r+w*s+x*l+k*m,e[9]=b*i+w*f+x*p+k*g,e[10]=b*a+w*u+x*d+k*y,e[11]=b*o+w*c+x*h+k*v,b=n[12],w=n[13],x=n[14],k=n[15],e[12]=b*r+w*s+x*l+k*m,e[13]=b*i+w*f+x*p+k*g,e[14]=b*a+w*u+x*d+k*y,e[15]=b*o+w*c+x*h+k*v,e},translate:function(e,t,n){var r,i,a,o,s,f,u,c,l,p,d,h,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],f=t[5],u=t[6],c=t[7],l=t[8],p=t[9],d=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=f,e[6]=u,e[7]=c,e[8]=l,e[9]=p,e[10]=d,e[11]=h,e[12]=r*m+s*g+l*y+t[12],e[13]=i*m+f*g+p*y+t[13],e[14]=a*m+u*g+d*y+t[14],e[15]=o*m+c*g+h*y+t[15]),e},rotateX:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],f=t[7],u=t[8],c=t[9],l=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+l*r,e[7]=f*i+p*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=l*i-s*r,e[11]=p*i-f*r,e},rotateY:function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],f=t[3],u=t[8],c=t[9],l=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-l*r,e[3]=f*i-p*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+l*i,e[11]=f*r+p*i,e},perspective:w,lookAt:x},A=((v=new Float32Array(3))[0]=0,v[1]=0,v[2]=0,{copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}}),D={},T=Object.create||function(e){var t=function(){};return t.prototype=e,new t},_=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},S=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function j(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=T(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}D=j,j.EventEmitter=j,j.prototype._events=void 0,j.prototype._maxListeners=void 0;var O,L=10;try{var F={};Object.defineProperty&&Object.defineProperty(F,"x",{value:0}),O=0===F.x}catch(de){O=!1}function C(e){return void 0===e._maxListeners?j.defaultMaxListeners:e._maxListeners}function z(e,t,n,r){var i,a,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]):(a=e._events=T(null),e._eventsCount=0),o){if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),!o.warned&&(i=C(e))&&i>0&&o.length>i){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=o.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",s.name,s.message)}}else o=a[t]=n,++e._eventsCount;return e}function M(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function B(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=S.call(M,r);return i.listener=n,r.wrapFn=i,i}function P(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):W(i,i.length):[]}function I(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function W(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}O?Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return L},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');L=e}}):j.defaultMaxListeners=L,j.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},j.prototype.getMaxListeners=function(){return C(this)},j.prototype.emit=function(e){var t,n,r,i,a,o,s="error"===e;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var f=new Error('Unhandled "error" event. ('+t+")");throw f.context=t,f}if(!(n=o[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=W(e,r),a=0;a<r;++a)i[a].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,a=W(e,i),o=0;o<i;++o)a[o].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var a=e.length,o=W(e,a),s=0;s<a;++s)o[s].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,a){if(t)e.call(n,r,i,a);else for(var o=e.length,s=W(e,o),f=0;f<o;++f)s[f].call(n,r,i,a)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),a=1;a<r;a++)i[a-1]=arguments[a];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,a=W(e,i),o=0;o<i;++o)a[o].apply(n,r)}(n,u,this,i)}return!0},j.prototype.addListener=function(e,t){return z(this,e,t,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(e,t){return z(this,e,t,!0)},j.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,B(this,e,t)),this},j.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,B(this,e,t)),this},j.prototype.removeListener=function(e,t){var n,r,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=T(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(var n=i,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}(n),1===n.length&&(r[e]=n[0]),r.removeListener&&this.emit("removeListener",e,o||t)}return this},j.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=T(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=T(null):delete n[e]),this;if(0===arguments.length){var i,a=_(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=T(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},j.prototype.listeners=function(e){return P(this,e,!0)},j.prototype.rawListeners=function(e){return P(this,e,!1)},j.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):I.call(e,t)},j.prototype.listenerCount=I,j.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var H={};function R(e){var t=this;if(!(this instanceof R))return new R(e);this.last=null,this.states=e,this.stopped=!0,this.value={};var n=Object.keys(e)[0];Object.keys(e[n].state).forEach(function(r){!function e(t,n,r){Array.isArray(n[r])?(t[r]=[],n[r].forEach(function(i,a){e(t[r],n[r],a)})):n[r]&&"object"==typeof n[r]?(t[r]={},Object.keys(n[r]).forEach(function(i){e(t[r],n[r],i)})):t[r]=0}(t.value,e[n].state,r)}),this.keys=Object.keys(this.value),this.sequence=[],this.index=0}function Y(e,t,n,r,i){if(Array.isArray(e[r]))for(var a=0;a<e[r].length;a++)Y(e[r],t[r],n[r],a,i);else if(e[r]&&"object"==typeof e[r]){e[r]={};var o=Object.keys(e[r]);for(a=0;a<o.length;a++)Y(e[r],t[r],n[r],o[a],i)}else e[r]=function(e,t,n){return e*(1-(n=Math.max(0,Math.min(1,n))))+t*n}(t[r],n[r],i)}H=R,R.prototype.go=function(e){this.sequence=e,this.state=e[0],this.index=0,this.last=null,this.stopped=!1},R.prototype.tick=function(e){null===this.last&&(this.last=e),e-this.last>=this.sequence[this.index+1]&&(this.last+=this.sequence[this.index+1],this.index+=2,this.state=this.sequence[this.index]);var t=this.states[this.state];if(!t)return this.stopped=!0,this.last=null,this.value;var n=this.states[this.sequence[this.index+2]];n||(n=t,this.last=null,this.stopped=!0);for(var r=void 0!==this.sequence[this.index+1]?(e-this.last)/this.sequence[this.index+1]:0,i=0;i<this.keys.length;i++){var a=this.keys[i],o=t.easing&&"function"==typeof t.easing[a]?t.easing[a](r):r;Y(this.value,t.state,n.state,a,o)}return this.value};var q=t({extensions:["oes_standard_derivatives"]}),U=function(e,t){var n=t||{};void 0===n.noScroll&&(n.noScroll=n.preventDefault);var r={view:b(new Float32Array(16)),projection:b(new Float32Array(16)),center:new Float32Array(n.center||3),theta:n.theta||0,phi:n.phi||0,distance:Math.log(n.distance||10),eye:new Float32Array(3),up:new Float32Array(n.up||[0,1,0]),fovy:n.fovy||Math.PI/4,near:void 0!==n.near?n.near:.01,far:void 0!==n.far?n.far:1e3,noScroll:void 0!==n.noScroll&&n.noScroll,flipY:!!n.flipY,dtheta:0,dphi:0,rotationSpeed:void 0!==n.rotationSpeed?n.rotationSpeed:1,zoomSpeed:void 0!==n.zoomSpeed?n.zoomSpeed:1,renderOnDirty:void 0!==typeof n.renderOnDirty&&!!n.renderOnDirty},i=n.element,a=void 0!==n.damping?n.damping:.9,o=new Float32Array([1,0,0]),s=new Float32Array([0,0,1]),f=Math.log("minDistance"in n?n.minDistance:.1),u=Math.log("maxDistance"in n?n.maxDistance:1e3),c=0,p=0,d=0;if(k&&!1!==n.mouse){var m=i||e._gl.canvas;function g(){return i?i.offsetHeight:window.innerHeight}(function(e,t){t||(t=e,e=window);var n=0,r=0,i=0,a={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function s(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==a.alt,a.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==a.shift,a.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==a.control,a.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==a.meta,a.meta=!!e.metaKey),t}function f(e,o){var f=l.x(o),u=l.y(o);"buttons"in o&&(e=0|o.buttons),(e!==n||f!==r||u!==i||s(o))&&(n=0|e,r=f||0,i=u||0,t&&t(n,r,i,a))}function u(e){f(0,e)}function c(){(n||r||i||a.shift||a.alt||a.meta||a.control)&&(r=i=0,n=0,a.shift=a.alt=a.control=a.meta=!1,t&&t(0,0,0,a))}function p(e){s(e)&&t&&t(n,r,i,a)}function d(e){0===l.buttons(e)?f(0,e):f(n,e)}function h(e){f(n|l.buttons(e),e)}function m(e){f(n&~l.buttons(e),e)}function g(){o||(o=!0,e.addEventListener("mousemove",d),e.addEventListener("mousedown",h),e.addEventListener("mouseup",m),e.addEventListener("mouseleave",u),e.addEventListener("mouseenter",u),e.addEventListener("mouseout",u),e.addEventListener("mouseover",u),e.addEventListener("blur",c),e.addEventListener("keyup",p),e.addEventListener("keydown",p),e.addEventListener("keypress",p),e!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}g();var y={element:e};Object.defineProperties(y,{enabled:{get:function(){return o},set:function(t){t?g():o&&(o=!1,e.removeEventListener("mousemove",d),e.removeEventListener("mousedown",h),e.removeEventListener("mouseup",m),e.removeEventListener("mouseleave",u),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseout",u),e.removeEventListener("mouseover",u),e.removeEventListener("blur",c),e.removeEventListener("keyup",p),e.removeEventListener("keydown",p),e.removeEventListener("keypress",p),e!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return a},enumerable:!0}})})(m,function(e,t,n){if(1&e){var a=(t-p)/(i?i.offsetWidth:window.innerWidth),o=(n-d)/g();r.dtheta+=4*r.rotationSpeed*a,r.dphi+=4*r.rotationSpeed*o,r.dirty=!0}p=t,d=n}),function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var r=h("ex",e),i=function(e){n&&e.preventDefault();var i=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=r;break;case 2:s=window.innerHeight}if(a*=s,o*=s,(i*=s)||a||o)return t(i,a,o,e)};e.addEventListener("wheel",i)}(m,function(e,t){c+=t/g()*r.zoomSpeed,r.dirty=!0},n.noScroll)}function y(e){var t=e*a;return Math.abs(t)<.1?0:(r.dirty=!0,t)}function v(e,t,n){return Math.min(Math.max(e,t),n)}r.dirty=!0;var E=e({context:Object.assign({},r,{dirty:function(){return r.dirty},projection:function(e){return w(r.projection,r.fovy,e.viewportWidth/e.viewportHeight,r.near,r.far),r.flipY&&(r.projection[5]*=-1),r.projection}}),uniforms:Object.keys(r).reduce(function(t,n){return t[n]=e.context(n),t},{})});function A(e,t){void 0!==A.dirty&&(r.dirty=A.dirty||r.dirty,A.dirty=void 0),e&&t&&(r.dirty=!0),r.renderOnDirty&&!r.dirty||(t||(t=e,e={}),function(e){Object.keys(e).forEach(function(t){r[t]=e[t]});var t=r.center,n=r.eye,i=r.up,a=r.dtheta,l=r.dphi;r.theta+=a,r.phi=v(r.phi+l,-Math.PI/2,Math.PI/2),r.distance=v(r.distance+c,f,u),r.dtheta=y(a),r.dphi=y(l),c=y(c);for(var p=r.theta,d=r.phi,h=Math.exp(r.distance),m=h*Math.sin(p)*Math.cos(d),g=h*Math.cos(p)*Math.cos(d),b=h*Math.sin(d),w=0;w<3;++w)n[w]=t[w]+m*s[w]+g*o[w]+b*i[w];x(r.view,n,t,i)}(e),E(t),r.dirty=!1)}return Object.keys(r).forEach(function(e){A[e]=r[e]}),A}(q,{distance:1.5,theta:-Math.PI/2,phi:0,center:[0,0,0]}),N=new Float32Array(16),Q=new Float32Array(3),G=Math.PI,V=new D.EventEmitter,X=function(){var e=document.createElement("div");e.innerHTML='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   width="744.09448819"\n   height="1052.3622047"\n   id="svg2"\n   version="1.1"\n   inkscape:version="0.48.5 r10040"\n   sodipodi:docname="icons.svg">\n  <defs\n     id="defs4">\n    <linearGradient\n       id="linearGradient5480"\n       osb:paint="solid">\n      <stop\n         style="stop-color:#f0eaea;stop-opacity:1;"\n         offset="0"\n         id="stop5482" />\n    </linearGradient>\n  </defs>\n  <sodipodi:namedview\n     id="base"\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1.0"\n     inkscape:pageopacity="0.0"\n     inkscape:pageshadow="2"\n     inkscape:zoom="4"\n     inkscape:cx="292.55307"\n     inkscape:cy="954.48721"\n     inkscape:document-units="px"\n     inkscape:current-layer="grid"\n     showgrid="false"\n     inkscape:window-width="1366"\n     inkscape:window-height="768"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="0" />\n  <metadata\n     id="metadata7">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1">\n    <g\n       id="fold"\n       transform="translate(-34,-25.5)"\n       inkscape:label="#g4037">\n      <rect\n         y="73.989479"\n         x="205.3773"\n         height="53.870399"\n         width="89.753067"\n         id="rect4035"\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.75460124;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:3.01840492, 3.01840492;stroke-dashoffset:0" />\n      <path\n         sodipodi:nodetypes="cc"\n         inkscape:connector-curvature="0"\n         id="path3890"\n         d="m 208.02887,101.19538 86.13228,0"\n         style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:0.1" />\n      <path\n         inkscape:connector-curvature="0"\n         id="path3892"\n         d="m 226.24191,71.941807 0,58.897193"\n         style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9" />\n      <path\n         style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9"\n         d="m 250.07996,71.941807 0,58.897193"\n         id="path3894"\n         inkscape:connector-curvature="0" />\n      <path\n         inkscape:connector-curvature="0"\n         id="path3896"\n         d="m 274.05805,71.941807 0,58.897193"\n         style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9" />\n    </g>\n    <path\n       style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0"\n       d="M 69.65625,40.697213 31.415963,78.9375 69.65625,117.17779 z"\n       id="left"\n       inkscape:connector-curvature="0"\n       sodipodi:nodetypes="cccc"\n       inkscape:label="#path3920" />\n    <g\n       id="grid"\n       inkscape:label="#g3845">\n      <rect\n         y="37.112183"\n         x="293.75"\n         height="65.5"\n         width="81.5"\n         id="rect3831"\n         style="fill:#ffffff;fill-opacity:0.05752213;stroke:none" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 297.00202,40.864206 15.22865,0 0,18.236765 -15.22865,0 z"\n         id="rect5493"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 316.55484,40.864206 15.22865,0 0,18.236765 -15.22865,0 z"\n         id="rect5495"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 336.29569,40.864206 15.22865,0 0,18.236765 -15.22865,0 z"\n         id="rect5497"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 356.60056,40.864206 15.22865,0 0,18.236765 -15.22865,0 z"\n         id="rect5499"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 297.00202,60.981075 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5514"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 316.55484,60.981075 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5516"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 336.29569,60.981075 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5518"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 356.60056,60.981075 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5520"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 297.00202,81.285931 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5539"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 316.55484,81.285931 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5541"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 336.29569,81.285931 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5543"\n         inkscape:connector-curvature="0" />\n      <path\n         style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064"\n         d="m 356.60056,81.285931 15.22865,0 0,18.236776 -15.22865,0 z"\n         id="rect5545"\n         inkscape:connector-curvature="0" />\n    </g>\n    <path\n       inkscape:label="#path3920"\n       sodipodi:nodetypes="cccc"\n       inkscape:connector-curvature="0"\n       id="right"\n       d="M 97.415963,40.697213 135.65625,78.9375 97.415963,117.17779 z"\n       style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0" />\n  </g>\n</svg>\n';var t=e.children[0];return t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",document.body.appendChild(t),{element:t,get:function(e){var n=t.querySelector("#"+e),r=n.cloneNode(!0),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","g"),o=n.getBoundingClientRect();return i.setAttribute("width",o.width),i.setAttribute("height",o.height),a.setAttribute("transform","translate("+-o.left+","+-o.top+")"),i.appendChild(a),a.appendChild(r),i}}}();!function(){document.body.style.margin="0px",document.body.style.overflow="hidden";var e=X.get("left");e.style.position="absolute",e.style.left="15px",e.style.bottom="15px",e.style.zIndex=100,e.style.opacity=.2;var t=e.querySelector("path");t.addEventListener("mouseover",function(){e.style.opacity=.8}),t.addEventListener("mouseout",function(){e.style.opacity=.2}),t.addEventListener("click",function(){V.emit("page:prev")}),document.body.appendChild(e);var n=X.get("right");n.style.position="absolute",n.style.right="15px",n.style.bottom="15px",n.style.zIndex=100,n.style.opacity=.2;var r=n.querySelector("path");r.addEventListener("mouseover",function(){n.style.opacity=.8}),r.addEventListener("mouseout",function(){n.style.opacity=.2}),r.addEventListener("click",function(){V.emit("page:next")}),document.body.appendChild(n);var i=X.get("fold");i.style.position="absolute",i.style.right="15px",i.style.top="15px",i.style.zIndex=100,i.style.opacity=.2;var a=i.querySelector("g");a.addEventListener("mouseover",function(){i.style.opacity=.8}),a.addEventListener("mouseout",function(){i.style.opacity=.2}),a.addEventListener("click",function(){V.emit("fold:toggle")}),document.body.appendChild(i)}();var K={page:0,folded:!0,speed:.35,zoom:1.3,pan:[0,0,0],prevMouse:[-1,-1]};window.addEventListener("mousedown",ce),window.addEventListener("mouseup",ce),window.addEventListener("mousemove",function(e){if(1&e.buttons&&K.prevMouse[0]>=0){var t=K.prevMouse[0]-e.clientX,n=K.prevMouse[1]-e.clientY;K.pan[0]-=.00175*t*K.zoom,K.pan[1]-=.00175*n*K.zoom,ce()}K.prevMouse[0]=e.clientX,K.prevMouse[1]=e.clientY}),window.addEventListener("wheel",function(e){K.zoom=pe(.25,1.5,K.zoom+.01*e.deltaY),ce()}),J=new Float32Array(16),Z=new Float32Array(16),$=[0,0,-1.5],ee=[0,0,0],te=[0,1,0],U=q({uniforms:{projection:function(e,t){var n=e.viewportWidth/e.viewportHeight;return E.perspective(J,Math.PI/4,n,.1,1e3)},view:function(e,t){return ee[0]=K.pan[0],ee[1]=K.pan[1],$[0]=K.pan[0],$[1]=K.pan[1],$[2]=-K.zoom*Math.max(1,Math.atan2(e.viewportHeight,e.viewportWidth)*G),E.lookAt(Z,$,ee,te)}}});var J,Z,$,ee,te,ne={p0:{parent:"p7",positions:[.5,.5,1.5,.5,1.5,1.5,.5,1.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[.5,.5,0],color:[0,0,0],page:0},p1:{parent:"p0",positions:[1.5,.5,2.5,.5,2.5,1.5,1.5,1.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[1.5,.5,0],color:[0,0,1],page:1},p2:{parent:"p1",positions:[2.5,.5,3.5,.5,3.5,1.5,2.5,1.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[2.5,.5,0],color:[0,1,0],page:2},p3:{parent:"p4",positions:[2.5,-.5,3.5,-.5,3.5,.5,2.5,.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[2.5,.5,0],color:[0,1,1],page:3},p4:{parent:"p5",positions:[1.5,-.5,2.5,-.5,2.5,.5,1.5,.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[1.5,.5,0],color:[1,0,0],page:4},p5:{parent:"p6",positions:[.5,-.5,1.5,-.5,1.5,.5,.5,.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[.5,.5,0],color:[1,0,1],page:5},p6:{parent:null,positions:[-.5,-.5,.5,-.5,.5,.5,-.5,.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[0,0,0],color:[1,1,0],page:6},p7:{parent:"p6",positions:[-.5,.5,.5,.5,.5,1.5,-.5,1.5],cells:[[0,1,2],[0,2,3]],pose:new Float32Array(16),model:new Float32Array(16),pivot:[0,.5,0],color:[1,1,1],page:7}},re=Object.values(ne),ie={};Object.keys(ne).forEach(function(e){ie[e]=ne[e].pose,ne[e].offset=[0,0,0]});var ae=q.texture();!function(e){"object"==typeof e&&e||f("invalid or missing configuration"),u(e,n,"config");var t=e.manifest;function l(t,n){if(t in e){var r=e[t];return"function"!=typeof r&&f('invalid callback "'+t+'"'),r}return null}"object"==typeof t&&t||f("missing manifest");var p=l("onDone");p||f("missing onDone() callback");var d=l("onProgress"),h=l("onError"),m={},g=o;function y(e){var t=e.name,n=e.stream,r="binary"===e.type,i=e.parser,f=new XMLHttpRequest,u=null,l=new c(t,function(){l.state!==s&&l.state!==a&&(f.onreadystatechange=null,f.abort(),l.state=a)});function p(){if(!(f.readyState<2||l.state===s||l.state===a)){if(200!==f.status)return x('error loading resource "'+e.name+'"');var n;if(f.readyState>2&&l.state===o)if(n="binary"===e.type?f.response:f.responseText,i.data)try{u=i.data(n)}catch(r){return x(r)}else u=n;if(f.readyState>3&&l.state===o){if(i.done)try{u=i.done()}catch(r){return x(r)}l.state=s}m[t]=u,l.progress=.75*l.progress+.25,l.ready=e.stream&&!!u||l.state===s,k()}}return f.onreadystatechange=n?p:function(){4===f.readyState&&p()},r&&(f.responseType="arraybuffer"),e.credentials&&(f.withCredentials=!0),f.open("GET",e.src,!0),f.send(),l}function v(e,t){var n=e.name,r=e.parser,i=new c(n,function(){i.state!==s&&i.state!==a&&(i.state=a,y(),t.src="")}),f=t;function u(){if(i.state===o)if(r.data)try{f=r.data(t)}catch(e){return x(e)}else f=t}function l(e){u(),m[n]=f,e.lengthComputable?i.progress=Math.max(i.progress,e.loaded/e.total):i.progress=.75*i.progress+.25,k(n)}function p(){if(u(),i.state===o){if(r.done)try{f=r.done()}catch(e){return x(e)}i.state=s}i.progress=1,i.ready=!0,m[n]=f,y(),k("finish "+n)}function d(){x('error loading asset "'+n+'"')}if(e.stream&&t.addEventListener("progress",l),"image"===e.type)t.addEventListener("load",p);else{var h=!1,g=!1;t.addEventListener("loadedmetadata",function(){g=!0,h&&p()}),t.addEventListener("canplay",function(){h=!0,g&&p()})}function y(){e.stream&&t.removeEventListener("progress",l),"image"===e.type?t.addEventListener("load",p):t.addEventListener("canplay",p),t.removeEventListener("error",d)}return t.addEventListener("error",d),e.credentials?t.crossOrigin="use-credentials":t.crossOrigin="anonymous",t.src=e.src,i}var b={text:y,binary:function(e){return y(e)},image:function(e){return v(e,document.createElement("img"))},video:function(e){return v(e,document.createElement("video"))},audio:function(e){return v(e,document.createElement("audio"))}},w=Object.keys(t).map(function(e){var n=t[e];function a(e,t){if(e in n.parser){var r=n.parser[e];return"function"!=typeof r&&f("invalid parser callback "+e+' for asset "'+e+'"'),r}return t}"string"==typeof n?n={src:n}:"object"==typeof n&&n||f('invalid asset definition "'+e+'"'),u(n,r,'asset "'+e+'"');var o,s,c={};return"parser"in n&&("function"==typeof n.parser?c={data:n.parser}:"object"==typeof n.parser&&n.parser?(u(c,i,'parser for asset "'+e+'"'),"onData"in c||f('missing onData callback for parser in asset "'+e+'"'),c={data:a("onData"),done:a("onDone")}):f('invalid parser for asset "'+e+'"')),{name:e,type:(o=Object.keys(b),s="text","type"in n&&(s=n.type),o.indexOf(s)<0&&f('invalid type "'+s+'" for asset "'+e+'", possible values: '+o),s),stream:!!n.stream,credentials:!!n.credentials,src:function(t,r,i){var a="";return"src"in n?a=n.src:f('missing src for asset "'+e+'"'),"string"!=typeof a&&f('invalid src for asset "'+e+'", must be a string'),a}(),parser:c}}).map(function(e){return b[e.type](e)});function x(e){g!==a&&g!==s&&(g=a,w.forEach(function(e){e.cancel()}),h?h("string"==typeof e?new Error("resl: "+e):e):console.error("resl error:",e))}function k(e){if(g!==a&&g!==s){var t=0,n=0;w.forEach(function(e){e.ready&&(n+=1),t+=e.progress}),n===w.length?(g=s,p(m)):d&&d(t/w.length,e)}}0===w.length&&setTimeout(function(){k("done")},1)}({manifest:{zine:{type:"image",src:"cabal.png"}},onDone:function(e){ae(e.zine),ce()}});var oe={5:[1,1,1,1,1,1,1,1],7:[1,-1,-1,1,1,-1,-1,1]};re.forEach(function(e){e.pageFlip=oe[5][e.page],e.pageOffset=5});var se={sineIn:function(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t},sineOut:function(e){return Math.sin(e*Math.PI/2)}},fe=H({page0Flip:{state:{x:G,y:G,page:0,offset:[0,0,0],flip:+G},easing:{x:se.sineOut,y:se.sineOut}},page0:{state:{x:G,y:G,page:0,offset:[0,0,0],flip:0},easing:{x:se.sineOut,y:se.sineOut}},page1:{state:{x:G,y:G,page:1,offset:[-.5,0,0],flip:0},easing:{x:se.sineOut,y:se.sineOut}},page2:{state:{x:G,y:G,page:2,offset:[-.5,0,0],flip:0},easing:{x:se.sineOut,y:se.sineOut}},page3:{state:{x:G,y:G,page:3,offset:[-.5,0,0],flip:0},easing:{x:se.sineOut,y:se.sineOut}},page4:{state:{x:G,y:G,page:4,offset:[0,0,0],flip:0},easing:{x:se.sineOut,y:se.sineOut}},page4Flip:{state:{x:G,y:G,page:4,offset:[0,0,0],flip:-G},easing:{x:se.sineOut,y:se.sineOut}},fold0:{state:{x:G,y:0,page:0,offset:[0,0,2],flip:0},easing:{x:se.sineOut,y:se.sineOut}},fold1:{state:{x:0,y:0,page:0,offset:[-1.5,-.5,2],flip:0},easing:{x:se.sineOut,y:se.sineOut}}}),ue={paper:function(e,t){var n=[0,0];return e({frag:"\n      precision highp float;\n      #extension GL_OES_standard_derivatives: enable\n      uniform float page, pageOffset, pageFlip;\n      uniform sampler2D texture;\n      uniform vec2 size;\n      varying vec2 vpos;\n      void main () {\n        float p = mod(page + pageOffset, 8.0);\n        float y = floor(p/4.0);\n        vec2 offset = vec2(\n          mix(1.0-(mod(p+1.0,4.01))/4.0,mod(p,4.0)/4.0,y),\n          y*0.5\n        );\n        vec2 uv = mod(vpos.xy*vec2(pageFlip)+0.5,vec2(1))/vec2(4,2) + offset;\n        vec2 d = vec2(0.2)/size;\n        vec4 c = texture2D(texture,uv);\n        vec4 cW = texture2D(texture,uv + vec2(-d.x,0));\n        vec4 cS = texture2D(texture,uv + vec2(0,d.y));\n        vec4 cE = texture2D(texture,uv + vec2(d.x,0));\n        vec4 cN = texture2D(texture,uv + vec2(0,-d.y));\n        gl_FragColor = (c + cW + cS + cE + cN) / 5.0;\n      }\n    ",vert:"\n      precision highp float;\n      uniform mat4 projection, view, model;\n      uniform vec3 offset;\n      attribute vec2 position;\n      varying vec2 vpos;\n      void main () {\n        vpos = position;\n        vec3 p = (model * vec4(position,0,1)).xyz + offset;\n        gl_Position = projection * view * vec4(p*vec3(1,1.3,1),1);\n      }\n    ",uniforms:{pageOffset:e.prop("pageOffset"),pageFlip:e.prop("pageFlip"),page:e.prop("page"),model:e.prop("model"),offset:e.prop("offset"),texture:function(){return t},size:function(e){return n[0]=e.viewportWidth,n[1]=e.viewportHeight,n}},attributes:{position:e.prop("positions")},elements:e.prop("cells")})}(q,ae)};function ce(){q.poll(),function(e){re.forEach(function(e){E.identity(e.pose)});var{x:t,y:n,offset:r,page:i,flip:a}=fe.tick(e);re.forEach(function(e){A.copy(e.offset,r);var n=0;n=e.page<2*i?-e.page*t*.004:(e.page-3*i)*t*.004,n*=Math.abs(a)>.5*G?-1:1,e.offset[2]+=n}),E.rotateY(ie.p5,ie.p5,.5*+t),E.rotateY(ie.p4,ie.p4,1*-t),E.rotateY(ie.p3,ie.p3,.5*+t),E.rotateY(ie.p0,ie.p0,.5*+t),E.rotateY(ie.p1,ie.p1,1*-t),E.rotateY(ie.p2,ie.p2,.5*+t),E.rotateX(ie.p7,ie.p7,1*+t),E.rotateY(ie.p5,ie.p5,.5*+n),E.rotateY(ie.p3,ie.p3,.5*+n),E.rotateY(ie.p0,ie.p0,1.5*-n),E.rotateY(ie.p2,ie.p2,.5*+n),E.rotateY(ie.p0,ie.p0,+le(0,1,i)*G-le(3,4,i)*G),E.rotateY(ie.p2,ie.p2,+le(1,2,i)*G-le(0,1,i)*G),E.rotateY(ie.p3,ie.p3,-le(1,2,i)*G+le(2,3,i)*G),E.rotateY(ie.p5,ie.p5,-le(2,3,i)*G+le(3,4,i)*G),E.rotateY(ie.p6,ie.p6,-le(3,4,i)*G+a)}(performance.now()/1e3),re.forEach(function(e){E.identity(e.model);for(var t=e;t;)E.identity(N),E.translate(N,N,t.pivot),E.multiply(N,N,t.pose),E.translate(N,N,A.negate(Q,t.pivot)),E.multiply(e.model,N,e.model),t=ne[t.parent]}),q.clear({color:[.2,0,.2,1],depth:!0}),U(function(){ue.paper(re)}),fe.stopped||window.requestAnimationFrame(ce)}function le(e,t,n){return pe(0,1,(n-e)/(t-e))}function pe(e,t,n){return Math.max(e,Math.min(t,n))}fe.go(["page0"]),ce(),V.on("page:next",function(){var e=K.speed;K.folded||4!==K.page?K.folded?4===K.page?fe.go(["page4",e,"page4Flip"]):fe.go(["page"+K.page,e,"page"+String((K.page+1)%5)]):(fe.go(["fold1",e,"fold0",e,"page"+K.page,e,"page"+String((K.page+1)%5)]),K.folded=!0):(fe.go(["fold1",e,"fold0",e,"page0"]),K.folded=!0),K.page=(K.page+1)%5,ce()}),V.on("page:prev",function(){var e=K.speed;K.folded||0!==K.page?K.folded?0===K.page?fe.go(["page0",e,"page0Flip"]):fe.go(["page"+K.page,e,"page"+String((K.page+4)%5)]):(fe.go(["fold1",e,"fold0",e,"page"+K.page,e,"page"+String((K.page+4)%5)]),K.folded=!0):(fe.go(["fold1",e,"fold0",e,"page4"]),K.folded=!0),K.page=(K.page+4)%5,ce()}),V.on("fold:toggle",function(){K.folded?V.emit("fold:unfold"):V.emit("fold:fold")}),V.on("fold:unfold",function(){var e=K.speed;fe.go(["page"+K.page,e,"fold0",e,"fold1"]),K.folded=!1,ce()}),V.on("fold:fold",function(){var e=K.speed;fe.go(["fold1",e,"fold0",e,"page"+K.page]),K.folded=!0,ce()}),window.addEventListener("keydown",function(e){"ArrowRight"===e.key?V.emit("page:next"):"ArrowLeft"===e.key?V.emit("page:prev"):" "===e.key&&V.emit("fold:toggle")}),window.addEventListener("resize",ce)}();</script><canvas style="border: 0px none; margin: 0px; padding: 0px; top: 0px; left: 0px; position: absolute; width: 1161px; height: 840px;" width="1266" height="916"></canvas><svg xmlns:osb="http://www.openswatchbook.org/uri/2009/osb" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="744.09448819" height="1052.3622047" id="svg2" version="1.1" inkscape:version="0.48.5 r10040" sodipodi:docname="icons.svg" style="position: absolute; top: 0px; left: 0px; visibility: hidden;">
  <defs id="defs4">
    <linearGradient id="linearGradient5480" osb:paint="solid">
      <stop style="stop-color:#f0eaea;stop-opacity:1;" offset="0" id="stop5482"></stop>
    </linearGradient>
  </defs>
  <sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="4" inkscape:cx="292.55307" inkscape:cy="954.48721" inkscape:document-units="px" inkscape:current-layer="grid" showgrid="false" inkscape:window-width="1366" inkscape:window-height="768" inkscape:window-x="0" inkscape:window-y="0" inkscape:window-maximized="0"></sodipodi:namedview>
  <metadata id="metadata7">
    <rdf:rdf>
      <cc:work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></dc:type>
        <dc:title></dc:title>
      </cc:work>
    </rdf:rdf>
  </metadata>
  <g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1">
    <g id="fold" transform="translate(-34,-25.5)" inkscape:label="#g4037">
      <rect y="73.989479" x="205.3773" height="53.870399" width="89.753067" id="rect4035" style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.75460124;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:3.01840492, 3.01840492;stroke-dashoffset:0"></rect>
      <path sodipodi:nodetypes="cc" inkscape:connector-curvature="0" id="path3890" d="m 208.02887,101.19538 86.13228,0" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:0.1"></path>
      <path inkscape:connector-curvature="0" id="path3892" d="m 226.24191,71.941807 0,58.897193" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9"></path>
      <path style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9" d="m 250.07996,71.941807 0,58.897193" id="path3894" inkscape:connector-curvature="0"></path>
      <path inkscape:connector-curvature="0" id="path3896" d="m 274.05805,71.941807 0,58.897193" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9"></path>
    </g>
    <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0" d="M 69.65625,40.697213 31.415963,78.9375 69.65625,117.17779 z" id="left" inkscape:connector-curvature="0" sodipodi:nodetypes="cccc" inkscape:label="#path3920"></path>
    <g id="grid" inkscape:label="#g3845">
      <rect y="37.112183" x="293.75" height="65.5" width="81.5" id="rect3831" style="fill:#ffffff;fill-opacity:0.05752213;stroke:none"></rect>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 297.00202,40.864206 15.22865,0 0,18.236765 -15.22865,0 z" id="rect5493" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 316.55484,40.864206 15.22865,0 0,18.236765 -15.22865,0 z" id="rect5495" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 336.29569,40.864206 15.22865,0 0,18.236765 -15.22865,0 z" id="rect5497" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 356.60056,40.864206 15.22865,0 0,18.236765 -15.22865,0 z" id="rect5499" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 297.00202,60.981075 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5514" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 316.55484,60.981075 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5516" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 336.29569,60.981075 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5518" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 356.60056,60.981075 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5520" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 297.00202,81.285931 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5539" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 316.55484,81.285931 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5541" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 336.29569,81.285931 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5543" inkscape:connector-curvature="0"></path>
      <path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:1.50406396;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:6.01625586, 6.01625586;stroke-dashoffset:0.1504064" d="m 356.60056,81.285931 15.22865,0 0,18.236776 -15.22865,0 z" id="rect5545" inkscape:connector-curvature="0"></path>
    </g>
    <path inkscape:label="#path3920" sodipodi:nodetypes="cccc" inkscape:connector-curvature="0" id="right" d="M 97.415963,40.697213 135.65625,78.9375 97.415963,117.17779 z" style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0"></path>
  </g>
</svg><svg width="38.26667785644531" height="76.51666259765625" style="position: absolute; left: 15px; bottom: 15px; z-index: 100; opacity: 0.2;"><g transform="translate(-31.399993896484375,-40.66667175292969)"><path style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0" d="M 69.65625,40.697213 31.415963,78.9375 69.65625,117.17779 z" id="left" inkscape:connector-curvature="0" sodipodi:nodetypes="cccc" inkscape:label="#path3920"></path></g></svg><svg width="38.28334045410156" height="76.51666259765625" style="position: absolute; right: 15px; bottom: 15px; z-index: 100; opacity: 0.2;"><g transform="translate(-97.39999389648438,-40.66667175292969)"><path inkscape:label="#path3920" sodipodi:nodetypes="cccc" inkscape:connector-curvature="0" id="right" d="M 97.415963,40.697213 135.65625,78.9375 97.415963,117.17779 z" style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.70692617px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:0"></path></g></svg><svg width="90.80000305175781" height="62.94999694824219" style="position: absolute; right: 15px; top: 15px; z-index: 100; opacity: 0.2;"><g transform="translate(-171.36666870117188,-44.41667175292969)"><g id="fold" transform="translate(-34,-25.5)" inkscape:label="#g4037">
      <rect y="73.989479" x="205.3773" height="53.870399" width="89.753067" id="rect4035" style="fill:#f0eaea;fill-opacity:1;stroke:#000000;stroke-width:0.75460124;stroke-linecap:round;stroke-linejoin:bevel;stroke-miterlimit:4;stroke-opacity:0;stroke-dasharray:3.01840492, 3.01840492;stroke-dashoffset:0"></rect>
      <path sodipodi:nodetypes="cc" inkscape:connector-curvature="0" id="path3890" d="m 208.02887,101.19538 86.13228,0" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:0.1"></path>
      <path inkscape:connector-curvature="0" id="path3892" d="m 226.24191,71.941807 0,58.897193" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9"></path>
      <path style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9" d="m 250.07996,71.941807 0,58.897193" id="path3894" inkscape:connector-curvature="0"></path>
      <path inkscape:connector-curvature="0" id="path3896" d="m 274.05805,71.941807 0,58.897193" style="fill:none;stroke:#ac9393;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4, 4;stroke-dashoffset:4.9"></path>
    </g></g></svg>

</body></html>
